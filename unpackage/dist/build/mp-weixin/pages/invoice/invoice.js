(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/invoice/invoice"],{"3def":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={search:function(){return n.e("components/search/search").then(n.bind(null,"5fea"))}},i=function(){var t=this,e=t.$createElement;t._self._c},o=[]},"5efc":function(t,e,n){},"7ef7":function(t,e,n){"use strict";n.r(e);var a=n("3def"),i=n("f191");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("ea6a");var r,s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=c.exports},ba1a:function(t,e,n){"use strict";(function(t){n("e09c");a(n("66fd"));var e=a(n("7ef7"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},da8b:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("3b7d"),i=n("f42c");function o(t){return u(t)||c(t)||s(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function c(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function u(t){if(Array.isArray(t))return l(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var f=function(){n.e("components/search/search").then(function(){return resolve(n("5fea"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/sliderPicker/sliderPicker").then(function(){return resolve(n("3422"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/messageBox/messageBox").then(function(){return resolve(n("aa83"))}.bind(null,n)).catch(n.oe)},m={data:function(){return ß,{searchType:2,pageIndex:1,pageSize:10,total:1,searchParams:"",invoiceData:[],loading:!1,timer:null,isPullDown:!1,isBottomRefresh:!1,curItem:"",refuse:[{label:"查看拒绝原因",value:"refuse"},{label:"取消",value:"cancel"}],check:[{label:"查看发票",value:"invoice"},{label:"取消",value:"cancel"}],list:[],messageInfo:{title:"拒绝原因",content:"",btnWords:"知道了"}}},components:{search:f,sliderPicker:h,messageBox:d},props:{},onLoad:function(t){},onReady:function(){},onShow:function(){this.getInvoiceDataFun()},onHide:function(){},onUnload:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{getInvoiceDataFun:function(e){var n=this;t.showLoading({title:"加载中"}),this.setData({loading:!0}),(0,a.get)({url:i.get_invoice_data+"/"+this.searchType+"?pageIndex="+this.pageIndex+"&pageSize="+this.pageSize+"&contractSubjectTitle="+this.searchParams,success:function(t){t.results.forEach((function(t){t.gmtCreate=n.formatTimeConvertFun(t.gmtCreate,1)})),e?n.setData({isPullDown:!1,invoiceData:t.results,total:t.total,loading:!1}):n.setData({invoiceData:[].concat(o(t.results),o(n.invoiceData)),total:t.total,loading:!1,isBottomRefresh:!1})},fail:function(t){console.log(t)},complete:function(){t.hideLoading()}})},handlePullDownFun:function(){var t=this;!this.loading&&this.total>this.invoiceData.length?(this.setData({isPullDown:!0}),this.getInvoiceDataFun(!0)):(this.timer&&clearTimeout(this.timer),this.setData({timer:setTimeout((function(){t.setData({isPullDown:!1})}),200)}))},handleToBottomFun:function(){var t=this;this.setData({isBottomRefresh:!0}),!this.loading&&this.total>this.invoiceData.length?this.getInvoiceDataFun():(this.timer&&clearTimeout(this.timer),this.setData({timer:setTimeout((function(){t.setData({isBottomRefresh:!1})}),300)}))},inputSearchFun:function(t){var e=this;this.timer&&clearTimeout(this.timer),this.setData({searchParams:t.detail,pageIndex:1,timer:setTimeout((function(){e.getInvoiceDataFun(!0)}),300)})},cancleSearchFun:function(){this.setData({searchParams:""}),this.getInvoiceDataFun(!0)},handleSelectItemFun:function(e){if(2==this.curItem.status&&(t.showLoading({title:"加载中"}),t.downloadFile({url:this.curItem.invoiceFile,success:function(e){console.log(e),t.openDocument({filePath:e.tempFilePath})},err:function(t){console.log(t)},complete:function(){t.hideLoading()}})),3==this.curItem.status){var n=JSON.parse(JSON.stringify(this.messageInfo));n.content=this.curItem.refuseReason,this.setData({messageInfo:n}),this.$refs.messageBox.show()}this.$refs.sliderPicker.hide()},handleShowSliderFun:function(t){this.setData({curItem:t.currentTarget.dataset.item,list:2==t.currentTarget.dataset.item.status?this.check:this.refuse}),this.$refs.sliderPicker.show()},formatTimeConvertFun:function(t,e){t+="",t=10==t.length?1e3*t:t;var n=new Date(Number(t)),a=n.getFullYear(),i=n.getMonth()+1;i=i<10?"0"+i:i;var o=n.getDate();o=o<10?"0"+o:o;var r=n.getHours();r=r<10?"0"+r:r;var s=n.getMinutes(),c=n.getSeconds();return s=s<10?"0"+s:s,c=c<10?"0"+c:c,0==e?a+"-"+i+"-"+o:a+""+i+"."+o+" "+r+":"+s+":"+c}}};e.default=m}).call(this,n("543d")["default"])},ea6a:function(t,e,n){"use strict";var a=n("5efc"),i=n.n(a);i.a},f191:function(t,e,n){"use strict";n.r(e);var a=n("da8b"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a}},[["ba1a","common/runtime","common/vendor"]]]);