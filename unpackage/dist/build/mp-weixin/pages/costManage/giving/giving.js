(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/costManage/giving/giving"],{"2b13":function(n,e,t){"use strict";var o=t("d62e"),a=t.n(o);a.a},"3d64":function(n,e,t){"use strict";var o;t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return s})),t.d(e,"a",(function(){return o}));var a=function(){var n=this,e=n.$createElement;n._self._c},s=[]},8270:function(n,e,t){"use strict";t.r(e);var o=t("8cdf"),a=t.n(o);for(var s in o)"default"!==s&&function(n){t.d(e,n,(function(){return o[n]}))}(s);e["default"]=a.a},"8cdf":function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t("3b7d"),a=t("730f"),s=t("537e"),i=function(){t.e("components/sliderPicker/sliderPicker").then(function(){return resolve(t("3422"))}.bind(null,t)).catch(t.oe)},u={data:function(){return{shanqian_icon:"https://shouyiner-prod.oss-cn-beijing.aliyuncs.com/wxapp/shanqian/cost/shanqian_icon.png",accountList:[{label:"个人账户",type:"signal"},{label:"企业账户",type:"company"},{label:"取消",type:"cancel"}],origin:"give",id:"",money:0,activeIndex:0,userName:"",companyUserName:"",personPhone:"",companyPhone:"",companyName:"",personalAuthStatus:-1,companyPersonAuthStatus:-1,companyAuthStatus:-1}},components:{sliderPicker:i},props:{},onLoad:function(n){n.origin&&this.setData({origin:n.origin}),n.id&&this.setData({id:n.id}),n.money&&(console.log(n),this.setData({money:n.money}))},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{handleSelectWayFun:function(){this.$refs.sliderPicker.show()},handleSelectAccoutFun:function(n){this.setData({activeIndex:n.detail}),this.$refs.sliderPicker.hide()},handleInputPhoneFun:function(n){return n.detail.value},handleBlurPhoneInputFun:function(e){var t=e.currentTarget.dataset.type,o=e.detail.value;if(!s.isTelCode(o))return setTimeout((function(){n.showToast({icon:"none",title:"请输入正确的手机号"})}),50),!1;"signal"==t&&(this.setData({personPhone:o}),this.personalIsAuthFun(o,"signal")),"company"==t&&(this.setData({companyPhone:o}),this.personalIsAuthFun(o,"company"))},handleBlurCompanyNameInputFun:function(n){var e=n.detail.value;this.setData({companyName:e}),this.comapnyIsAuthFun(e)},handleInputCompanyNameFun:function(n){var e=n.detail.value;return this.setData({companyName:e}),console.log(this.companyName),e},personalIsAuthFun:function(e,t){var s=this;n.showLoading({title:"查询中"}),(0,o.get)({url:a.get_personal_auth_status+"?phone="+e,success:function(n){"signal"==t&&(0==n||2==n?s.setData({personalAuthStatus:n,userName:""}):(s.setData({personalAuthStatus:1,userName:n}),console.log(s.personalAuthStatus,s.userName))),"company"==t&&(0==n||2==n?s.setData({companyPersonAuthStatus:n,companyUserName:""}):s.setData({companyPersonAuthStatus:1,companyUserName:n}))},fail:function(n){console.log(n)},complete:function(){n.hideLoading()}})},comapnyIsAuthFun:function(e){var t=this;n.showLoading({title:"查询中"}),(0,o.get)({url:a.get_company_auth_status+"?companyName="+e,success:function(n){t.setData({companyAuthStatus:n})},fail:function(n){console.log(n)},complete:function(){n.hideLoading()}})},handleConfirmSendFun:function(){this.money<10&&setTimeout((function(){n.showToast({title:"不能赠送小于10元的礼品卡"})}),50),"give"==this.origin&&this.sendByGiveFun(),"card"==this.origin&&this.sendByCardFun()},sendByGiveFun:function(){var e={transferId:this.id,acceptUserType:this.activeIndex+1,acceptUserPhone:0==this.activeIndex?this.personPhone:this.companyPhone};1==this.activeIndex&&(e.acceptCompanyName=this.companyName),n.showLoading({title:"赠送中"}),(0,o.postBody)({url:a.send_by_buy,params:e,success:function(e){console.log(e),setTimeout((function(){n.showToast({icon:"none",title:"礼品卡赠送成功"})}),50),setTimeout((function(){n.navigateTo({url:"/pages/costManage/sendResult/sendResult?result=s"})}),1500)},fail:function(e){console.log(e),n.navigateTo({url:"/pages/costManage/sendResult/sendResult?result=f"})},complete:function(){n.hideLoading()}})},sendByCardFun:function(){var e={transferId:this.id,transferMoney:this.money,acceptUserType:this.activeIndex+1,acceptUserPhone:0==this.activeIndex?this.personPhone:this.companyPhone};1==this.activeIndex&&(e.acceptCompanyName=this.companyName),n.showLoading({title:"赠送中"}),(0,o.postBody)({url:a.send_card_directive,params:e,success:function(e){setTimeout((function(){n.showToast({icon:"none",title:"礼品卡赠送成功"})}),50),setTimeout((function(){n.navigateTo({url:"/pages/costManage/sendResult/sendResult?result=s"})}),1500)},fail:function(e){setTimeout((function(){n.showToast({icon:"none",title:e})}),50),setTimeout((function(){n.navigateTo({url:"/pages/costManage/sendResult/sendResult?result=f"})}),1500)},complete:function(){n.hideLoading()}})}}};e.default=u}).call(this,t("543d")["default"])},a650:function(n,e,t){"use strict";t.r(e);var o=t("3d64"),a=t("8270");for(var s in a)"default"!==s&&function(n){t.d(e,n,(function(){return a[n]}))}(s);t("2b13");var i,u=t("f0c5"),c=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);e["default"]=c.exports},cb23:function(n,e,t){"use strict";(function(n){t("e09c");o(t("66fd"));var e=o(t("a650"));function o(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},d62e:function(n,e,t){}},[["cb23","common/runtime","common/vendor"]]]);