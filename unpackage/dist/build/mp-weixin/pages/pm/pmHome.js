(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pm/pmHome"],{"148e":function(e,t,n){"use strict";(function(e){n("e09c");a(n("66fd"));var t=a(n("2d2c"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"2d2c":function(e,t,n){"use strict";n.r(t);var a=n("7178"),o=n("73c3");for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("e37d");var c,s=n("f0c5"),r=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],c);t["default"]=r.exports},5627:function(e,t,n){},7178:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var a={wechatUserInfo:function(){return n.e("components/wechatUserInfo/wechatUserInfo").then(n.bind(null,"9465"))}},o=function(){var e=this,t=e.$createElement;e._self._c},i=[]},"73c3":function(e,t,n){"use strict";n.r(t);var a=n("b196"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},b196:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("3b7d"),o=n("aa5f"),i=getApp(),c=function(){n.e("components/icon/icon").then(function(){return resolve(n("c5a1"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/avatar/avatar").then(function(){return resolve(n("1537"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/wechatUserInfo/wechatUserInfo").then(function(){return resolve(n("9465"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/halfSlideItem/halfSlideItem").then(function(){return resolve(n("933a"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/sliderPicker/sliderPicker").then(function(){return resolve(n("3422"))}.bind(null,n)).catch(n.oe)},f={data:function(){return{items:[{icon:"https://shouyiner-prod.oss-cn-beijing.aliyuncs.com/wxapp/shanqian/cost/seal_icon.png",name:"印章管理",hasAuth:!0},{icon:"https://shouyiner-prod.oss-cn-beijing.aliyuncs.com/wxapp/shanqian/cost/cost_icon.png",name:"费用管理",hasAuth:!0},{icon:"/static/images/invoice/invoice_apply_icon.png",name:"发票申请",hasAuth:!0},{icon:"/static/images/invoice/invoice_apply_icon.png",name:"收款",hasAuth:!0}],sliderList:[{label:"销售模版发起收款",value:0},{label:"独立收款",value:1},{label:"取消",value:2}],isShowReceiptMethod:!1,isAdmin:!1,wechatUserInfoShow:!1,waitAffirmCount:0,unreadContractMessageCount:0,username:"",userPhone:"",userToken:"",userAvatar:"",isAuth:!1}},components:{icon:c,avatar:s,wechatUserInfo:r,halfSlideItem:l,sliderPicker:u},props:{},onLoad:function(t){if(null!=t.navigateUrl){var n=t.navigateUrl.replace(":","?");n=n.replace("#","="),e.navigateTo({url:n})}},onShow:function(){var t=3==i.globalData.memberType;if(this.setData({isAdmin:t}),this.init(),i.globalData.isLoginIn()){var n=e.getStorageSync("currentUser"),a=this.items;n.companyId&&n.roleTypes&&!n.roleTypes.includes("1")&&!n.roleTypes.includes("2")||n.companyId&&null==n.roleTypes||!i.globalData.isLoginIn()?a[1].hasAuth=!1:a[1].hasAuth=!0,n.companyId&&2!=n.payStatus||!n.companyId?a[3].hasAuth=!1:a[3].hasAuth=!0,this.setData({items:a})}else this.setData({items:[]})},onShareAppMessage:function(){},methods:{init:function(){this.setData({username:i.globalData.userName,userPhone:i.globalData.phone,userToken:i.globalData.userToken,isAuth:i.globalData.isAuth}),console.log(i.globalData,77777)},login:function(){e.redirectTo({url:"/pages/root/root"})},tapItem:function(t){if(!i.globalData.isLoginIn())return i.globalData.login(),!1;var n=t.currentTarget.dataset.index,a="";switch(Number(n)){case 0:a="/pages/pm/stamp/stampManager";break;case 1:a="/pages/costManage/costManage";break;case 2:a="/pages/invoice/invoice";break;case 3:this.selectReceipMathod();break;default:a="";break}console.log(a),3!=n&&e.navigateTo({url:a})},getUserInfo:function(){var t=this;e.getSetting({success:function(n){n.authSetting["scope.userInfo"]?e.getUserInfo({success:function(e){t.getWechatUserInfo({detail:e.userInfo})},fail:function(){t.setData({wechatUserInfoShow:!0})}}):t.setData({wechatUserInfoShow:!0})}})},getWechatUserInfo:function(e){this.setData({wechatUserInfoShow:!1}),(0,a.put)({url:o.update_usericon,params:{iconUrl:e.detail.avatarUrl,nickname:e.detail.nickName},success:function(){i.globalData.updateUserIcon(e.detail.avatarUrl)}})},authAction:function(){this.isAuth||e.navigateTo({url:"/pages/authentication/personal/personal-auth-type/index"})},selectReceipMathod:function(){this.$refs.sliderPicker.show()},handleSliderOperateFun:function(t){switch(t.detail){case 0:e.navigateTo({url:"/pages/collection/templateCollection/templateCollection?isTemplate=1"});break;case 1:e.navigateTo({url:"/pages/collection/dirctCollection/dirctCollection?isTemplate=0"});break;default:break}this.$refs.sliderPicker.hide()}}};t.default=f}).call(this,n("543d")["default"])},e37d:function(e,t,n){"use strict";var a=n("5627"),o=n.n(a);o.a}},[["148e","common/runtime","common/vendor"]]]);