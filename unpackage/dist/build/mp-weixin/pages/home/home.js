(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{"5f28":function(t,n,e){},8363:function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return a}));var a={homeAddDataStorge:function(){return e.e("components/home-add-dataStorge/home-add-dataStorge").then(e.bind(null,"6ed3"))}},o=function(){var t=this,n=t.$createElement,e=(t._self._c,t.__map(t.userList,(function(n,e){var a=t.__get_orig(n),o=JSON.stringify(n);return{$orig:a,g0:o}})));t.$mp.data=Object.assign({},{$root:{l0:e}})},i=[]},c5a3:function(t,n,e){"use strict";e.r(n);var a=e("f0c8"),o=e.n(a);for(var i in a)"default"!==i&&function(t){e.d(n,t,(function(){return a[t]}))}(i);n["default"]=o.a},ced4:function(t,n,e){"use strict";var a=e("5f28"),o=e.n(a);o.a},d348:function(t,n,e){"use strict";e.r(n);var a=e("8363"),o=e("c5a3");for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);e("ced4");var u,c=e("f0c5"),s=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],u);n["default"]=s.exports},d44f:function(t,n,e){"use strict";(function(t){e("e09c");a(e("66fd"));var n=a(e("d348"));function a(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},f0c8:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("3b7d"),o=e("aa5f"),i=getApp(),u=function(){e.e("components/home-add-dataStorge/home-add-dataStorge").then(function(){return resolve(e("6ed3"))}.bind(null,e)).catch(e.oe)},c=function(){e.e("components/sliderPicker/sliderPicker").then(function(){return resolve(e("3422"))}.bind(null,e)).catch(e.oe)},s={data:function(){return{showDialog:!1,mineSignCount:"0",otherSignCount:"0",hasAuth:!1,fileName:"",userName:"",userList:[],sliderList:[{label:"发起文件签署",value:1},{label:"从合同模版发起签署",value:2},{label:"取消",value:2}],authType:1,isLogin:""}},components:{homeAddDataStorge:u,sliderPicker:c},props:{},onLoad:function(){},onShow:function(){this.initUserStatusOnLoadingFun()},onUnload:function(){},onShareAppMessage:function(){},methods:{initUserStatusOnLoadingFun:function(){var n=t.getStorageSync("currentUser"),e="";n&&(e=n.companyId?n.companyName:n.name&&""!=n.name?n.name:"未登录用户"),this.setData({userName:e,isLogin:i.globalData.isLoginIn()}),this.getCompanyUserInfoFun(),this.getContractCountFun()},getSignalUsersInfoFun:function(){var n=this;t.showLoading({title:"加载中"}),(0,a.get)({url:o.get_user_info,success:function(e){var a=t.getStorageSync("currentUser"),o=JSON.parse(JSON.stringify(n.userList));o.unshift(e),a||(t.setStorageSync("currentUser",e),a=e),t.setStorageSync("userAccount",e.account),n.setData({userList:o,userName:a&&a.companyId?a.compantName:e.name?e.name:"未认证用户",authType:1,hasAuth:!!(a.companyId&&1==a.authStatus||1==a.auth)}),i.globalData.isAuth=!!(a.companyId&&1==a.authStatus||1==a.auth)},fail:function(n){setTimeout((function(){t.showToast({icon:"none",title:n})}),50)},complete:function(){t.hideLoading()}})},getCompanyUserInfoFun:function(){var n=this;t.showLoading({title:"加载中"}),(0,a.get)({url:o.companyList,success:function(t){var e=t.data;n.setData({userList:e}),n.getSignalUsersInfoFun()},fail:function(n){setTimeout((function(){t.showToast({icon:"none",title:n})}),50)},complete:function(){t.hideLoading()}})},handleToSearchPageFun:function(){if(!this.handleGetUserLoginStatusFun())return i.globalData.login(),!1;i.globalData.checkHasAuth()&&t.navigateTo({url:"/pages/searchResult/searchResult"})},handleCloseUserDialogFun:function(){this.setData({showDialog:!1})},handleLaunchUserSwitchFun:function(){if(!this.handleGetUserLoginStatusFun())return i.globalData.login(),!1;this.setData({showDialog:!0})},switchUser:function(n){var e=n.currentTarget.dataset.item,a=e.companyId?e.companyName:e.name;console.log(e,999),this.setData({userName:a||"未认证用户",showDialog:!1,authType:e.companyId?2:1,hasAuth:!!(e.companyId&&1==e.authStatus||!e.companyId&&1==e.auth)}),i.globalData.isAuth=!!(e.companyId&&1==e.authStatus||!e.companyId&&1==e.auth),t.setStorageSync("currentUser",e),this.getContractCountFun()},handleCreateCompanyFun:function(){if(!this.handleGetUserLoginStatusFun())return i.globalData.login(),!1;i.globalData.checkHasAuth()&&t.navigateTo({url:"/pages/authentication/company/company-create/index"})},handleToViewContractForSelfFun:function(){if(!this.handleGetUserLoginStatusFun())return i.globalData.login(),!1;i.globalData.checkHasAuth()&&t.navigateTo({url:"/pages/contract/contractList/contractList?searchType=2&pageTitle=待自己处理"})},handleToViewContractForOthersFun:function(){if(!this.handleGetUserLoginStatusFun())return i.globalData.login(),!1;i.globalData.checkHasAuth()&&t.navigateTo({url:"/pages/contract/contractList/contractList?searchType=3&pageTitle=待他人处理"})},handleLaunchContractFun:function(){if(!this.handleGetUserLoginStatusFun())return i.globalData.login(),!1;i.globalData.checkHasAuth()&&this.$refs.sliderPicker.show()},handleSliderOperateFun:function(t){switch(console.log(t.detail),t.detail){case"0":this.handleLaunchByfileFun();break;case"1":this.handleLaunchByTemplateFun();break;default:break}this.$refs.sliderPicker.hide()},handleLaunchByfileFun:function(){t.chooseMessageFile({count:1,type:"file",success:function(n){var e=n.tempFiles[0].name,i=n.tempFiles[0].name+"";return-1==i.indexOf(".pdf")&&-1==i.indexOf(".doc")?(setTimeout((function(){t.showToast({title:"文件格式必须为.pdf或.doc",icon:"none",duration:2e3,mask:!0})}),50),!1):n.tempFiles[0].size>5242880?(setTimeout((function(){t.showToast({title:"文件大小不能超过5MB",icon:"none",duration:2e3,mask:!0})}),50),!1):void(0,a.upload)({url:o.get_contract_uploadFile,filePath:n.tempFiles[0].path,key:"file",success:function(n){t.navigateTo({url:"/pages/contract/sign/launchSign/launchSign?fileName="+e+"&url="+n.url+"&coverUrl="+n.coverUrl+"&backfileName="+n.fileName})},fail:function(n){setTimeout((function(){t.showToast({title:n,icon:"none"})}),50)}})},fail:function(n){setTimeout((function(){t.showToast({title:n})}),50)}})},handleLaunchByTemplateFun:function(){t.navigateTo({url:"/pages/template/contractTemplate/contractTemplate"})},getContractCountFun:function(){var n=this;(0,a.get)({url:o.update_count,success:function(t){n.setData({otherSignCount:"undefined"==t?0:t.otherContractCount,mineSignCount:"undefined"==t?0:t.myContractCount})},fail:function(n){setTimeout((function(){t.showToast({icon:"none",title:n})}),50)}})},authAction:function(){var n=t.getStorageSync("currentUser").companyId;void 0==n?t.navigateTo({url:"/pages/authentication/personal/personal-auth-type/index"}):t.navigateTo({url:"/pages/authentication/company/company-auth-type/index"})},handleGetUserLoginStatusFun:function(){return i.globalData.isLoginIn()}}};n.default=s}).call(this,e("543d")["default"])}},[["d44f","common/runtime","common/vendor"]]]);