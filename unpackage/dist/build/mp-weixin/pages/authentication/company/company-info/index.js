(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/authentication/company/company-info/index"],{1181:function(e,a,n){"use strict";(function(e){n("e09c");t(n("66fd"));var a=t(n("e30a"));function t(e){return e&&e.__esModule?e:{default:e}}e(a.default)}).call(this,n("543d")["createPage"])},1763:function(e,a,n){"use strict";var t;n.d(a,"b",(function(){return o})),n.d(a,"c",(function(){return i})),n.d(a,"a",(function(){return t}));var o=function(){var e=this,a=e.$createElement;e._self._c},i=[]},2209:function(e,a,n){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var t=n("3b7d"),o=n("e9ef"),i=n("1259");function s(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}var u=n("adf8"),l={data:function(){return{ishighLight:!1,businessImage:null,companyName:"",companyId:"",creditCode:"",companyTypeIndex:0,legalPersonName:"",companyTypes:[{label:"请选择",value:0},{label:"企业",value:1},{label:"个体工商户",value:2},{label:"律所",value:6},{label:"其他组织",value:5}],query:"",field:""}},components:{},props:{},onLoad:function(e){this.setData({query:e}),console.log(e)},onShow:function(){"legent"==this.query.type?this.setData({companyTypes:[{label:"请选择",value:0},{label:"企业",value:1},{label:"个体工商户",value:2}]}):this.setData({companyTypes:[{label:"请选择",value:0},{label:"企业",value:1},{label:"个体工商户",value:2},{label:"律所",value:6},{label:"其他组织",value:5}]})},onShareAppMessage:function(){},methods:{uploadImage:function(a){var n=this;e.showLoading({title:"识别中..."}),(0,t.upload)({url:o.businessLicenseUpload,filePath:a,key:"businessImage",success:function(a){e.hideLoading(),console.log(a),n.setData(a);var t=n.companyName,o=n.creditCode,i=n.legalPersonName,s=n.businessImage;void 0==t||""==t||void 0==o||""==o||""==i||void 0==i||null==s?(console.log("come in"),n.setData({ishighLight:!1})):n.setData({ishighLight:!0})},fail:function(a){e.hideLoading(),setTimeout((function(){e.showToast({title:a,icon:"none"})}),50)}})},bindPickerChange:function(e){this.setData({companyTypeIndex:e.detail.value})},chooseImage:function(){var a=this;e.chooseImage({count:1,sizeType:["compressed"],success:function(e){var n=e.tempFilePaths;a.setData({businessImage:n[0]}),a.uploadImage(n[0])}})},next:function(){var a=this,n=this.companyTypeIndex,i=this.companyName,s=this.creditCode,u=this.legalPersonName,l=this.query,c=e.getStorageSync("currentUser"),r=[];if(i||r.push("企业名称"),s||r.push("统一社会信用代码"),u||r.push("法定代表人姓名"),0==n&&r.push("企业类型"),"legent"==l.type&&!/^9+/.test(s))return setTimeout((function(){e.showToast({icon:"none",title:"法人认证统一社会信用代码需为9开头，非9请走代理人认证"})}),50),!1;if(r.length)return setTimeout((function(){e.showToast({icon:"none",title:r.join("、")+"不能为空"})}),50),!1;var d={companyType:n,companyName:i,creditCode:s,legalPersonName:u,companyId:c.companyId||l.companyId,authChannel:2};e.showLoading({title:"加载中"}),"legent"==l.type?(0,t.postBody)({url:o.companyAuth,params:d,success:function(){var n=Object.assign({},c,d);a.getSealBase64Fun(),e.hideLoading(),e.setStorageSync("currentUser",n),e.navigateTo({url:"/pages/authentication/company/auth-result/index?result=s"})},fail:function(a){e.hideLoading(),setTimeout((function(){e.showToast({title:a,icon:"none"})}),50)}}):(0,t.postBody)({url:o.companyHandle,params:d,success:function(){e.hideLoading();var a=e.getStorageSync("currentUser");a.authStatus=1,e.setStorageSync("currentUser",a),e.setStorageSync("companyInfoApply",d),e.navigateTo({url:"/pages/authentication/company/company-pay-info/index"})},fail:function(){e.hideLoading(),e.navigateTo({url:"/pages/authentication/company/auth-result/index?result=f"})}})},bindKeyInput:function(e){var a=e.target.dataset.field,n=e.detail.value;this.setData(s({},a,n));var t=this.companyName,o=this.creditCode,i=this.legalPersonName,u=this.businessImage;void 0==t||""==t||void 0==o||""==o||""==i||void 0==i||null==u?this.setData({ishighLight:!1}):this.setData({ishighLight:!0})},back:function(){e.navigateBack()},getSealBase64Fun:function(){u.FXQ.companySeal(this.company.companyName||"公司名字",0,0,"","  ",this.createSealFun)},createSealFun:function(e){var a=this;(0,t.postBody)({url:i.create_seal,params:{base64String:e},success:function(e){a.uploadCompanySealFun(e)},fail:function(e){console.log(e)}})},uploadCompanySealFun:function(a){var n={name:"公司印章",url:a.url,auto:!0};(0,t.postBody)({url:i.upload_company_seal+"?auto="+!0,params:n,success:function(){console.log("印章制作完成")},fail:function(a){e.hideLoading(),setTimeout((function(){e.showToast({icon:"none",title:a})}),50)}})}}};a.default=l}).call(this,n("543d")["default"])},"30dd":function(e,a,n){"use strict";var t=n("a7d0"),o=n.n(t);o.a},8908:function(e,a,n){"use strict";n.r(a);var t=n("2209"),o=n.n(t);for(var i in t)"default"!==i&&function(e){n.d(a,e,(function(){return t[e]}))}(i);a["default"]=o.a},a7d0:function(e,a,n){},e30a:function(e,a,n){"use strict";n.r(a);var t=n("1763"),o=n("8908");for(var i in o)"default"!==i&&function(e){n.d(a,e,(function(){return o[e]}))}(i);n("30dd");var s,u=n("f0c5"),l=Object(u["a"])(o["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],s);a["default"]=l.exports}},[["1181","common/runtime","common/vendor"]]]);