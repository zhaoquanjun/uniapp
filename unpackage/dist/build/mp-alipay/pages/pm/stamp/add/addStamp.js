(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/pm/stamp/add/addStamp"],{"03db":function(t,e,n){"use strict";n.r(e);var a=n("108f"),o=n.n(a);for(var c in a)"default"!==c&&function(t){n.d(e,t,(function(){return a[t]}))}(c);e["default"]=o.a},"108f":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("3b7d"),o=n("1259"),c=getApp(),s={data:function(){return{stampUrl:"",color:"#000",pen:"4",penSizeShow:!1}},components:{},props:{},onShow:function(){setTimeout((function(){t.showToast({icon:"none",title:"请将手机横屏"})}),50)},onLoad:function(t){},onShareAppMessage:function(){},methods:{canvasIdErrorCallback:function(t){console.error("canvas error:"+t.detail.errMsg)},touchStart:function(e){this.startX=e.changedTouches[0].x,this.startY=e.changedTouches[0].y,this.context=t.createCanvasContext("stampCanvas"),this.context.setStrokeStyle(this.color),this.context.setLineWidth(this.pen),this.context.setLineCap("round"),this.context.beginPath()},touchMove:function(t){var e=t.changedTouches[0].x,n=t.changedTouches[0].y;this.context.moveTo(this.startX,this.startY),this.context.lineTo(e,n),this.context.stroke(),this.startX=e,this.startY=n,this.context.draw(!0)},switchPen:function(t){console.log("切换font");var e=t.currentTarget.dataset.pen;this.setData({pen:e})},switchColor:function(t){console.log("切换color");var e=t.currentTarget.dataset.color;this.setData({color:e})},clearAction:function(){console.log("清除"),this.context.clearRect(0,0,750,1334),this.context.draw()},submitAction:function(){var e=t.createSelectorQuery();e.select("#stampCanvas").boundingClientRect((function(e){var n=e.width,s=e.height;t.canvasToTempFilePath({canvasId:"stampCanvas",x:0,y:0,width:n,height:s,success:function(e){var i=e.tempFilePath;console.log(i);var r=t.createCanvasContext("myCanvas");r.fillStyle="#fff",r.fillRect(0,0,n,s);var u=n/s;r.rotate(-90*Math.PI/180),r.scale(u,u),r.translate(1.5*-n,0),r.drawImage(i,0,0,n,s),r.draw(!0,(function(){t.canvasToTempFilePath({canvasId:"myCanvas",x:0,y:0,width:s,height:n,success:function(e){t.showLoading({title:"",mask:!0}),(0,a.upload)({url:o.upload_painted_wx_url,filePath:e.tempFilePath,key:"file",success:function(e){console.log(e);var n=c.globalData.getUserToken(),s={token:n,"Content-Type":"application/json"};(0,a.postBody)({url:o.save_personnal_seal,header:s,params:{name:"印章",url:e.url,originType:1},success:function(e){console.log(e),t.hideLoading(),t.navigateBack({delta:getCurrentPages.length-1})},fail:function(e){t.hideLoading(),t.navigateBack({delta:getCurrentPages.length-1})}})},fail:function(e){console.log(e),t.hideLoading()}})}})}))},fail:function(t){console.log(t)}})})).exec()}}};e.default=s}).call(this,n("c11b")["default"])},1842:function(t,e,n){"use strict";(function(t){n("e09c");a(n("66fd"));var e=a(n("4b45"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("c11b")["createPage"])},"4b45":function(t,e,n){"use strict";n.r(e);var a=n("9801"),o=n("03db");for(var c in o)"default"!==c&&function(t){n.d(e,t,(function(){return o[t]}))}(c);n("99e0");var s,i=n("f0c5"),r=Object(i["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=r.exports},"86f9":function(t,e,n){},9801:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement;t._self._c},c=[]},"99e0":function(t,e,n){"use strict";var a=n("86f9"),o=n.n(a);o.a}},[["1842","common/runtime","common/vendor"]]]);