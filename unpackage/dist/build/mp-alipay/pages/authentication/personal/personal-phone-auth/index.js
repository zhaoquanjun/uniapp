(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/authentication/personal/personal-phone-auth/index"],{"0cfb":function(t,e,n){"use strict";n.r(e);var o=n("34d2"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},"34d2":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("3b7d"),i=n("e9ef"),a=n("aa5f");function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(){n.e("components/modal/modal").then(function(){return resolve(n("462b"))}.bind(null,n)).catch(n.oe)},u={data:function(){return{ishighLight:!1,smsButtonText:"获取验证码",name:"",idCard:"",userId:"",phone:"",phoneCode:"",checked:!1,warnTips:["1、在您使用闪签账号签发文件前，您需要进行实名认证，实名认证需要提供您的真实姓名、身份证号码、手机号码；收集此类信息是纯属满足相关法律法规的实名制要求，若您不提供这类信息，您将无法完成实名认证，亦无法以实名身份签发文件。","2、实名认证通过后会由权威CA机构为您颁发数字证书，我们会保留您的数字证书信息，此信息包含您的姓名、身份证件信息，以及为您申请的数字证书序列号，以便供您在签发文件时调用。若您不授权我们保存此信息，您将无法正常使用我们的签发服务。"],warnTitle:"隐私保护协议",isShow:!1,field:"",codeTime:""}},components:{modal:c},props:{},onLoad:function(t){},onShareAppMessage:function(){},methods:{handleShowSecretFun:function(){this.setData({isShow:!0})},handleEmitFun:function(){this.setData({isShow:!1})},showSafeInfo:function(){t.showModal({title:"个人身份隐私安全声明",showCancel:!1,confirmText:"知道了",content:"您输入的身份信息仅用于个人实名认证和获取CA认证证书"})},checkedTap:function(){var t=this.checked;this.setData({checked:!t});var e=this.name,n=this.idCard,o=this.checked,i=this.phone,a=this.phoneCode;void 0==e||""==e||void 0==n||""==n||null==o||""==i||void 0==i||""==a||void 0==a?this.setData({ishighLight:!1}):this.setData({ishighLight:!0})},bindKeyInput:function(t){var e=this.name,n=this.idCard,o=this.checked,i=this.phone,a=this.phoneCode,c=t.target.dataset.field,u=t.detail.value;this.setData(s({},c,u)),void 0==e||""==e||void 0==n||""==n||null==o||""==i||void 0==i||""==a||void 0==a?this.setData({ishighLight:!1}):this.setData({ishighLight:!0})},changeCodeText:function(){var t=this,e=60,n=setInterval((function(){e-=1,e>0?t.setData({smsButtonText:"重新获取 ".concat(e,"s"),codeTime:e}):(clearInterval(n),t.setData({smsButtonText:"重新获取",codeTime:e}))}),1e3)},getPhoneCode:function(){var e=this.phone,n=this.codeTime,a=this;if(!n){if(!e)return setTimeout((function(){t.showToast({icon:"none",title:"请输入正确的手机号码"})}),50),!1;t.showLoading({title:"加载中..."}),(0,o.get)({url:i.smsSend+e,success:function(){t.hideLoading(),setTimeout((function(){t.showToast({icon:"none",title:"短信验证码发送成功"},50)})),a.changeCodeText()},fail:function(){t.hideLoading(),setTimeout((function(){t.showToast({icon:"none",title:"短信验证码发送失败"})}),50)}})}},back:function(){t.navigateBack()},next:function(){var e=this.name,n=this.idCard,s=this.phone,c=this.phoneCode,u=this.checked,h=[];if(e||h.push("姓名"),n||h.push("证件号"),s||h.push("手机号"),c||h.push("验证码"),h.length)return setTimeout((function(){t.showToast({icon:"none",title:h.join("、")+"不能为空"})}),50),!1;var d=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return d.test(n)?0==u?(console.log("name"),setTimeout((function(){t.showToast({icon:"none",title:"请阅读并同意《隐私保护协议》"})}),50),!1):(t.showLoading({title:"加载中"}),t.setStorageSync("personInfo",{name:e,idCard:n,phone:s}),void(0,o.postBody)({url:"".concat(i.authPhone,"?phoneCode=").concat(c),params:{name:e,idCard:n,phone:s},success:function(e){console.log(e),t.hideLoading(),(0,o.get)({url:a.get_user_info,success:function(e){var n=t.getStorageSync("currentUser");n.name=e.name,n.auth=1,t.setStorageSync("currentUser",n)}}),t.navigateTo({url:"/pages/authentication/personal/auth-result/index?result=s&type=phone"})},fail:function(e){console.log(e),t.hideLoading(),t.navigateTo({url:"/pages/authentication/personal/auth-result/index?result=f&type=phone&desc="+e})}})):(setTimeout((function(){t.showToast({icon:"none",title:"请输入正确的身份证号码"})}),50),!1)}}};e.default=u}).call(this,n("c11b")["default"])},"4ab2":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={modal:function(){return n.e("components/modal/modal").then(n.bind(null,"462b"))}},i=function(){var t=this,e=t.$createElement;t._self._c},a=[]},"7b53":function(t,e,n){"use strict";n.r(e);var o=n("4ab2"),i=n("0cfb");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("9385");var s,c=n("f0c5"),u=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);e["default"]=u.exports},9385:function(t,e,n){"use strict";var o=n("dd68"),i=n.n(o);i.a},"9d751":function(t,e,n){"use strict";(function(t){n("e09c");o(n("66fd"));var e=o(n("7b53"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("c11b")["createPage"])},dd68:function(t,e,n){}},[["9d751","common/runtime","common/vendor"]]]);