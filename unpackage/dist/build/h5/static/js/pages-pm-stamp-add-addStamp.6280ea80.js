(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-pm-stamp-add-addStamp"],{"03db":function(t,a,e){"use strict";e.r(a);var n=e("7794"),i=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(a,t,(function(){return n[t]}))}(o);a["default"]=i.a},"078d":function(t,a,e){"use strict";var n;e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return n}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",[e("v-uni-canvas",{staticClass:"stamp-canvas",attrs:{"canvas-id":"stampCanvas",id:"stampCanvas","disable-scroll":"false"},on:{touchstart:function(a){arguments[0]=a=t.$handleEvent(a),t.touchStart.apply(void 0,arguments)},touchmove:function(a){arguments[0]=a=t.$handleEvent(a),t.touchMove.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"watermark",attrs:{src:"/static/pages/pm/stamp/add/watermark.png"}})],1),e("v-uni-canvas",{staticClass:"stamp-canvas copy-canvas",staticStyle:{"z-index":"-11",opacity:"0",visiblity:"hidden"},attrs:{"canvas-id":"myCanvas",id:"myCanvas"}}),e("v-uni-view",{staticClass:"operation-btn-view"},[e("v-uni-view",{class:"pen-btn "+("#000"===t.color?"active":""),attrs:{"data-color":"#000"},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.switchColor.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"pen",staticStyle:{"background-color":"#000"}})],1),e("v-uni-view",{class:"pen-btn "+("#22ACF8"===t.color?"active":""),attrs:{"data-color":"#22ACF8"},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.switchColor.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"pen",staticStyle:{"background-color":"#22ACF8"}})],1),e("v-uni-view",{class:"pen-btn "+("#FE4E51"===t.color?"active":""),attrs:{"data-color":"#FE4E51"},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.switchColor.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"pen",staticStyle:{"background-color":"#FE4E51"}})],1),e("v-uni-view",{staticClass:"line"}),e("v-uni-image",{class:"pen-btn pen-size "+("4"==t.pen?"active-pen":""),attrs:{src:"/static/pages/pm/stamp/add/pen.png","data-pen":"4"},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.switchPen.apply(void 0,arguments)}}}),e("v-uni-image",{class:"pen-btn pen-size "+("6"==t.pen?"active-pen":""),attrs:{src:"/static/pages/pm/stamp/add/pen1.png","data-pen":"6"},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.switchPen.apply(void 0,arguments)}}}),e("v-uni-image",{class:"pen-btn pen-size "+("8"==t.pen?"active-pen":""),attrs:{src:"/static/pages/pm/stamp/add/pen2.png","data-pen":"8"},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.switchPen.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"clean-btn",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.clearAction.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"clean-text"},[t._v("清除")])],1),e("v-uni-view",{staticClass:"submit-btn",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.submitAction.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"submit-text"},[t._v("提交")])],1)],1)],1)},o=[]},1259:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.save_personnal_seal=a.upload_painted_wx_url=a.delete_painted_url=a.set_default_seal=a.company_painted_list=a.person_painted_list=a.upload_person_seal=a.upload_company_seal=a.create_seal=void 0;var n=e("3b7d"),i=n.host+"/v1/pass/uploadImgByBase64String";a.create_seal=i;var o=n.host+"/v1/file/saveCompanySeal";a.upload_company_seal=o;var s=n.host+"/v1/file/savePersonalSeal";a.upload_person_seal=s;var c=n.host+"/v1/file/getPersonalSealList";a.person_painted_list=c;var r=n.host+"/v1/file/getEnterpriseSealList";a.company_painted_list=r;var l=n.host+"/v1/file/painted/default";a.set_default_seal=l;var d=n.host+"/v1/file/handleSignImageStatus";a.delete_painted_url=d;var p=n.host+"/v1/pass/uploadFile";a.upload_painted_wx_url=p;var u=n.host+"/v1/file/savePersonalSeal";a.save_personnal_seal=u,t.exports.create_company_cachet_url=n.host+"/v1/file/create/cachet"},"2b6a":function(t,a,e){var n=e("5a5a");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("4f06").default;i("7d3c4c0d",n,!0,{sourceMap:!1,shadowMode:!1})},"4b45":function(t,a,e){"use strict";e.r(a);var n=e("078d"),i=e("03db");for(var o in i)"default"!==o&&function(t){e.d(a,t,(function(){return i[t]}))}(o);e("f376");var s,c=e("f0c5"),r=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"bbcecbda",null,!1,n["a"],s);a["default"]=r.exports},"5a5a":function(t,a,e){var n=e("24fb");a=n(!1),a.push([t.i,"/* pages/pm/stamp/add/addStamp.wxss */.stamp-canvas[data-v-bbcecbda]{position:fixed;top:0;left:%?98?%;display:block;width:%?652?%;height:100%;background-color:#f7f8f9}.copy-canvas[data-v-bbcecbda]{left:-200%}.watermark[data-v-bbcecbda]{width:%?768?%;height:%?178?%;-webkit-transform:rotate(90deg);transform:rotate(90deg);-webkit-transform-origin:0 0;transform-origin:0 0;position:relative;margin-top:%?200?%;margin-left:60%}.operation-btn-view[data-v-bbcecbda]{position:fixed;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-content:flex-start;align-content:flex-start;-webkit-flex-wrap:wrap;flex-wrap:wrap;padding:%?70?% %?8?%;width:%?97?%;height:100%;background-color:#fff;box-sizing:border-box}.pen-btn[data-v-bbcecbda]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?30?%;padding:%?10?%;width:%?48?%;height:%?48?%;border-radius:50%;border:%?4?% solid transparent;background:#fff}.pen-btn .pen[data-v-bbcecbda]{width:%?36?%;height:%?36?%;color:transparent;border-radius:50%}.pen-size-container[data-v-bbcecbda]{position:absolute;right:%?-200?%;top:%?360?%;background:#fff;-webkit-transform:rotate(90deg);transform:rotate(90deg);width:136px;line-height:%?43?%;height:43px;background:#fff;border-radius:4px}.line[data-v-bbcecbda]{border-right:1px solid #e5e5e5;float:left;width:%?40?%;height:%?40?%;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.pen-btn.active[data-v-bbcecbda]{border:%?4?% solid #dfdfdf;position:relative;background-color:#fff;box-shadow:%?0?% %?4?% %?8?% %?0?% hsla(0,0%,61.6%,.5)}.pen-btn.active-pen[data-v-bbcecbda]{border:%?4?% solid #dfdfdf;background:#f8f8f8;box-shadow:%?0?% %?4?% %?8?% %?0?% hsla(0,0%,61.6%,.5)}.pen-text[data-v-bbcecbda]{width:%?60?%;height:%?60?%;font-size:%?28?%;font-weight:200;line-height:%?60?%;color:#fff}.first-pen-btn[data-v-bbcecbda]{margin-top:0}.clean-btn[data-v-bbcecbda]{position:fixed;bottom:%?246?%;background-color:#f5f5f5;-webkit-transform:rotate(90deg);transform:rotate(90deg);text-align:center;width:%?126?%;height:%?60?%;line-height:%?50?%;border-radius:%?30?%}.clean-text[data-v-bbcecbda]{width:%?126?%;height:%?60?%;font-size:%?28?%;font-weight:200;line-height:%?60?%;color:#000}.submit-btn[data-v-bbcecbda]{position:fixed;bottom:%?100?%;-webkit-transform:rotate(90deg);transform:rotate(90deg);text-align:center;width:%?126?%;height:%?60?%;line-height:%?50?%;background:#464646;border-radius:%?30?%}.submit-text[data-v-bbcecbda]{width:%?126?%;height:%?60?%;line-height:%?50?%;font-size:%?28?%;font-weight:200;line-height:%?60?%;color:#fff}",""]),t.exports=a},7794:function(t,a,e){"use strict";(function(t){e("ac1f"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("3b7d"),i=e("1259"),o=getApp(),s={data:function(){return{stampUrl:"",color:"#000",pen:"4",penSizeShow:!1}},components:{},props:{},onShow:function(){setTimeout((function(){uni.showToast({icon:"none",title:"请将手机横屏"})}),50)},onLoad:function(t){},onShareAppMessage:function(){},methods:{canvasIdErrorCallback:function(a){t.error("canvas error:"+a.detail.errMsg)},touchStart:function(t){this.startX=t.changedTouches[0].x,this.startY=t.changedTouches[0].y,this.context=uni.createCanvasContext("stampCanvas"),this.context.setStrokeStyle(this.color),this.context.setLineWidth(this.pen),this.context.setLineCap("round"),this.context.beginPath()},touchMove:function(t){var a=t.changedTouches[0].x,e=t.changedTouches[0].y;this.context.moveTo(this.startX,this.startY),this.context.lineTo(a,e),this.context.stroke(),this.startX=a,this.startY=e,this.context.draw(!0)},switchPen:function(a){t.log("切换font");var e=a.currentTarget.dataset.pen;this.setData({pen:e})},switchColor:function(a){t.log("切换color");var e=a.currentTarget.dataset.color;this.setData({color:e})},clearAction:function(){t.log("清除"),this.context.clearRect(0,0,750,1334),this.context.draw()},submitAction:function(){var a=uni.createSelectorQuery();a.select("#stampCanvas").boundingClientRect((function(a){var e=a.width,s=a.height;uni.canvasToTempFilePath({canvasId:"stampCanvas",x:0,y:0,width:e,height:s,success:function(a){var c=a.tempFilePath;t.log(c);var r=uni.createCanvasContext("myCanvas");r.fillStyle="#fff",r.fillRect(0,0,e,s);var l=e/s;r.rotate(-90*Math.PI/180),r.scale(l,l),r.translate(1.5*-e,0),r.drawImage(c,0,0,e,s),r.draw(!0,(function(){uni.canvasToTempFilePath({canvasId:"myCanvas",x:0,y:0,width:s,height:e,success:function(a){uni.showLoading({title:"",mask:!0}),(0,n.upload)({url:i.upload_painted_wx_url,filePath:a.tempFilePath,key:"file",success:function(a){t.log(a);var e=o.globalData.getUserToken(),s={token:e,"Content-Type":"application/json"};(0,n.postBody)({url:i.save_personnal_seal,header:s,params:{name:"印章",url:a.url,originType:1},success:function(a){t.log(a),uni.hideLoading(),uni.navigateBack({delta:getCurrentPages.length-1})},fail:function(t){uni.hideLoading(),uni.navigateBack({delta:getCurrentPages.length-1})}})},fail:function(a){t.log(a),uni.hideLoading()}})}})}))},fail:function(a){t.log(a)}})})).exec()}}};a.default=s}).call(this,e("5a52")["default"])},f376:function(t,a,e){"use strict";var n=e("2b6a"),i=e.n(n);i.a}}]);