(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-costManage-buyCard-buyCard"],{"0aa0":function(t,e,a){"use strict";var n=a("dc39"),i=a.n(n);i.a},"12e1":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"\nuni-view[data-v-5b3cab23]{box-sizing:border-box}.buy-card--page .section[data-v-5b3cab23]{margin:%?16?% 0;padding:%?48?%;background-color:#fff}.label[data-v-5b3cab23]{font-size:%?32?%;line-height:%?32?%;color:#333}.value[data-v-5b3cab23]{font-size:%?32?%;line-height:%?32?%;color:#333}.buy-card--page .buy-amount--section[data-v-5b3cab23]{padding:0 %?48?%;background-color:#fff}.buy-card--page .buy-amount--section .amount-list[data-v-5b3cab23]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?2?% solid #f5f5f5}.buy-amount--section .amount-list .list-area[data-v-5b3cab23]{padding:%?32?% 0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.amount-list .list-area .list-item[data-v-5b3cab23]{margin-left:%?20?%;padding:%?8?% %?30?%;color:#666;font-size:%?28?%;line-height:%?40?%;border:%?2?% solid #ddd;border-radius:%?4?%}.amount-list .list-area .list-item.active[data-v-5b3cab23]{color:#ed6c00;border-color:#ed6c00}.buy-amount--section .amount-input--area[data-v-5b3cab23]{position:relative;padding:%?32?% 0;border-bottom:%?2?% solid #f5f5f5}.amount-input--area uni-input[data-v-5b3cab23]{padding-right:%?48?%;text-align:right;font-size:%?28?%;color:#333;line-height:%?28?%}.count-area uni-input[data-v-5b3cab23]{padding-right:%?20?%;text-align:right}.amount-input--area .prefix[data-v-5b3cab23]{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);font-size:%?28?%;line-height:%?28?%;color:#333}.amount-input--area uni-input[data-v-5b3cab23]::-webkit-input-placeholder{font-size:%?28?%;color:#999;line-height:%?28?%}.amount-input--area uni-input[data-v-5b3cab23]::placeholder{font-size:%?28?%;color:#999;line-height:%?28?%}.total-way--seciton[data-v-5b3cab23]{padding:0 %?48?%!important}.total-way--seciton .item[data-v-5b3cab23]{padding:%?44?% 0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?2?% solid #f5f5f5}.total-way--seciton .item.select-count--area[data-v-5b3cab23]{padding:%?32?% 0}.total-way--seciton .item[data-v-5b3cab23]:last-of-type{border-bottom:none}.total-way--seciton .item .count-area[data-v-5b3cab23]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.total-way--seciton .item .count-area .minus[data-v-5b3cab23],\n.total-way--seciton .item .count-area .incres[data-v-5b3cab23]{width:%?60?%;height:%?60?%;text-align:center;line-height:%?52?%;font-size:%?32?%;color:#666;background-color:#f2f2f2;border:%?2?% solid #ddd;border-radius:%?4?%}.total-way--seciton .item .count-area .count[data-v-5b3cab23]{height:%?60?%;line-height:%?56?%;width:%?80?%;text-align:center;font-size:%?28?%;color:#4a4a4a;border-top:%?2?% solid #ddd;border-bottom:%?2?% solid #ddd;background-color:#fff}.way-select--area .way-select--area[data-v-5b3cab23]{position:relative}.way-select--area .way-select--area .select-value[data-v-5b3cab23]{padding-right:%?26?%;font-size:%?28?%;color:#333;line-height:%?28?%}.way-select--area .way-select--area .trangle[data-v-5b3cab23]{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:0;height:0;border-left:%?10?% solid transparent;border-right:%?10?% solid transparent;border-top:%?18?% solid #666}.confirm-btn[data-v-5b3cab23]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:%?80?%;height:%?100?%;line-height:%?100?%;width:calc(100% - %?96?%);text-align:center;color:#fff;font-size:%?32?%;font-weight:500;border-radius:%?8?%;background-color:#464646}body.?%PAGE?%[data-v-5b3cab23]{background-color:#f5f5f5}",""]),t.exports=e},"1eaf":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{wrapperShow:!1,contentShow:!1}},components:{},props:{sliderList:{type:Array,default:[]}},methods:{show:function(){var t=this;this.setData({wrapperShow:!0}),setTimeout((function(){t.setData({contentShow:!0})}),200)},hide:function(){var t=this;this.setData({contentShow:!1}),setTimeout((function(){t.setData({wrapperShow:!1})}),200)},handleSelectSliderValueFun:function(t){var e=t.currentTarget.dataset.index;if(e==this.sliderList.length-1)return this.hide(),!1;this.$emit("selectWay",{detail:e})}}};e.default=n},3422:function(t,e,a){"use strict";a.r(e);var n=a("c3be"),i=a("7fed");for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("0aa0");var s,r=a("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"e95c2d94",null,!1,n["a"],s);e["default"]=c.exports},3616:function(t,e,a){"use strict";a.r(e);var n=a("dc4f"),i=a("b95d");for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("fc84");var s,r=a("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"5b3cab23",null,!1,n["a"],s);e["default"]=c.exports},4858:function(t,e,a){"use strict";var n=a("4ea4");a("99af"),a("a9e3"),a("b680"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("3b7d"),o=a("730f"),s=n(a("3422")),r={data:function(){return{amountList:[{label:100,value:100},{label:500,value:500},{label:1e3,value:1e3}],selectList:[{label:"账户余额",value:"account"},{label:"微信支付",value:"wx"},{label:"取消",value:"cancel"}],origin:"buy",activeIndex:0,valueStatus:"select",rechargeValue:100,total:Number(100).toFixed(2),selectActive:100,count:1,timer:null,placeholders:["请输入10或10以上的金额","请输入10～1000整数"]}},components:{sliderPicker:s.default},props:{},onLoad:function(t){t.origin&&this.setData({origin:t.origin})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{handleSelectPayWayFun:function(t){this.setData({activeIndex:t.detail}),this.$refs.sliderPicker.hide()},handleSelectValueFun:function(t){var e=t.currentTarget.dataset.value;this.setData({selectActive:e,rechargeValue:e,total:(e*this.count).toFixed(2),valueStatus:"select"})},handleInputValueFun:function(t){var e=t.detail.value;return this.setData({rechargeValue:e,total:(this.count*e).toFixed(2)}),e},handleCountValueFun:function(t){var e=t.detail.value;return this.setData({count:e,total:this.rechargeValue?(this.rechargeValue*e).toFixed(2):"0.00"}),e},handleBlurCountFun:function(t){var e=t.detail.value;return e>500&&(e=500),this.setData({count:e}),e},handleFocusFun:function(){"select"==this.valueStatus&&this.setData({selectActive:-1,rechargeValue:"",valueStatus:"input",total:0})},handleSelectWayFun:function(){this.$refs.sliderPicker.show()},handleConfirmBuyFun:function(){var t=this;this.rechargeValue&&Number(this.rechargeValue)>=10?(uni.showLoading({title:"支付中"}),0==this.activeIndex&&(0,i.get)({url:o.buy_card_by_account+"?amount=".concat(this.total,"&goods=").concat(this.rechargeValue,"&goodsNum=").concat(this.count),success:function(e){console.log(e),setTimeout((function(){uni.showToast({icon:"none",title:"礼品卡购买成功，已存至【礼品卡 - 可使用】清单中",duration:3e3})}),50),t.setData({timer:setTimeout((function(){"give"==t.origin&&uni.navigateTo({url:"/pages/costManage/giveWay/giveWay?origin="+t.origin+"&id="+e+"&money="+t.rechargeValue+"&count="+t.count}),"buy"==t.origin&&uni.redirectTo({url:"/pages/costManage/accountCard/accountCard?type=1&origin=result"})}),2e3)})},fail:function(e){console.log(e),uni.showModal({title:"购买失败",content:0==t.activeIndex?"账户余额不足，礼品卡购买失败，您可以先充值再购买礼品卡，或者直接使用微信支付购买":"购买失败",showCancel:!1,confirmText:"我知道了"})},complete:function(){uni.hideLoading()}}),1==this.activeIndex&&this.getWxPayParamsFun()):setTimeout((function(){uni.showToast({icon:"none",title:"购买金额不能小于10元"})}),50)},getWxPayParamsFun:function(){var t=this;uni.showLoading({title:"创建订单中"}),(0,i.get)({url:o.get_wx_pay_params+"?amount="+this.total+"&body=微信支付&rechargeType=0&goods="+this.rechargeValue+"&goodsNum="+this.count,success:function(e){console.log(e),t.payByWxFun(e)},fail:function(t){setTimeout((function(){uni.showToast({icon:"none",title:t})}),50)},complete:function(){uni.hideLoading()}})},payByWxFun:function(t){var e=this;this.rechargeValue&&uni.requestPayment({timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign,success:function(t){setTimeout((function(){uni.showToast({icon:"none",title:"支付成功"})}),50),e.setData({timer:setTimeout((function(){"give"==e.origin&&uni.navigateTo({url:"/pages/costManage/giveWay/giveWay?origin="+e.origin+"&id="+t+"&money="+e.rechargeValue+"&count="+e.count}),"buy"==e.origin&&uni.redirectTo({url:"/pages/costManage/accountCard/accountCard?type=1"})}),2e3)})},fail:function(t){console.log(t)},complete:function(){}})}}};e.default=r},"730f":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.send_card_directive=e.send_by_buy=e.get_company_auth_status=e.get_personal_auth_status=e.cancel_hare_card=e.share_card=e.get_wx_pay_params=e.buy_card_by_account=e.get_card_list=e.get_balance_list=e.get_accout_info=e.get_gift_card_status=e.get_gift_card_from_wx=void 0;var n=a("3b7d"),i=n.host+"/v1/expense/receiveShareGiftCard/";e.get_gift_card_from_wx=i;var o=n.host+"/v1/expense/transferGiftCardTimeout/";e.get_gift_card_status=o;var s=n.host+"/v1/account/getCurrentUserOrCompanyInfo";e.get_accout_info=s;var r=n.host+"/v1/expense/consumptionDetailsList";e.get_balance_list=r;var c=n.host+"/v1/expense/couponList";e.get_card_list=c;var l=n.host+"/v1/pay/account/pay";e.buy_card_by_account=l;var u=n.host+"/v1/pay/create/order";e.get_wx_pay_params=u;var d=n.host+"/v1/expense/shareGiftCard";e.share_card=d;var f=n.host+"/v1/expense/cancelShareGiftCard/";e.cancel_hare_card=f;var v=n.host+"/v1/account/user/getAuthUserInfoByNameAndPhone";e.get_personal_auth_status=v;var b=n.host+"/v1/account/company/getOneAuthCompanyByName";e.get_company_auth_status=b;var h=n.host+"/v1/expense/batchTransfer";e.send_by_buy=h;var p=n.host+"/v1/expense/transfer";e.send_card_directive=p},"7fed":function(t,e,a){"use strict";a.r(e);var n=a("1eaf"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"801f":function(t,e,a){var n=a("12e1");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("32593d93",n,!0,{sourceMap:!1,shadowMode:!1})},a04e:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".slider-picker--area[data-v-e95c2d94]{position:fixed;top:0;left:0;width:100%;height:100%;display:none;z-index:39}.wrapper-show[data-v-e95c2d94]{display:block}.slider-picker--area .mask[data-v-e95c2d94]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5)}.slider-picker--area .slider-box[data-v-e95c2d94]{position:absolute;left:0;bottom:0;-webkit-transform:translateY(100%);transform:translateY(100%);padding:%?10?% %?48?%;width:100%;background-color:#fff;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;box-sizing:border-box}.slider-picker--area .slider-box.content-show[data-v-e95c2d94]{-webkit-transform:translateY(0);transform:translateY(0)}.slider-picker--area .slider-box .slider-item[data-v-e95c2d94]{width:100%;height:%?104?%;line-height:%?104?%;text-align:center;border-bottom:%?2?% solid #e6e6e6;font-size:%?32?%;color:#212121}.slider-picker--area .slider-box .slider-item[data-v-e95c2d94]:last-of-type{color:#999;border-bottom:none}",""]),t.exports=e},b95d:function(t,e,a){"use strict";a.r(e);var n=a("4858"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},c3be:function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{class:"slider-picker--area "+(t.wrapperShow?"wrapper-show":"")},[a("v-uni-view",{staticClass:"mask",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hide.apply(void 0,arguments)}}}),a("v-uni-view",{class:"slider-box "+(t.contentShow?"content-show":"")},t._l(t.sliderList,(function(e,n){return a("v-uni-view",{key:n,staticClass:"slider-item",attrs:{"data-value":e.value,"data-index":n},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleSelectSliderValueFun.apply(void 0,arguments)}}},[t._v(t._s(e.label))])})),1)],1)},o=[]},dc39:function(t,e,a){var n=a("a04e");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("13913480",n,!0,{sourceMap:!1,shadowMode:!1})},dc4f:function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"buy-card--page"},[a("v-uni-view",{staticClass:"buy-amount--section section"},[a("v-uni-view",{staticClass:"amount-list"},[a("v-uni-view",{staticClass:"label"},[t._v("面值金额")]),a("v-uni-view",{staticClass:"list-area"},t._l(t.amountList,(function(e,n){return a("v-uni-view",{key:n,class:"list-item "+(t.selectActive==e.value&&"select"==t.valueStatus?"active":""),attrs:{"data-value":e.value},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleSelectValueFun.apply(void 0,arguments)}}},[t._v(t._s(e.label)+"元")])})),1)],1),a("v-uni-view",{staticClass:"amount-input--area"},[a("v-uni-input",{attrs:{placeholder:t.placeholders[t.activeIndex],type:"number"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.handleInputValueFun.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.handleFocusFun.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"prefix"},[t._v("元")])],1)],1),a("v-uni-view",{staticClass:"total-way--seciton section"},[a("v-uni-view",{staticClass:"select-count--area item"},[a("v-uni-view",{staticClass:"label"},[t._v("购买数量")]),a("v-uni-view",{staticClass:"count-area"},[a("v-uni-input",{attrs:{placeholder:"请输入礼品卡个数",type:"number",value:t.count},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.handleCountValueFun.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.handleBlurCountFun.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"prefix"},[t._v("个")])],1)],1),a("v-uni-view",{staticClass:"total--area item"},[a("v-uni-view",{staticClass:"label"},[t._v("总金额")]),a("v-uni-view",{staticClass:"value"},[t._v("¥ "+t._s(t.total))])],1),a("v-uni-view",{staticClass:"way-select--area item"},[a("v-uni-view",{staticClass:"label"},[t._v("购买方式")]),a("v-uni-view",{staticClass:"way-select--area",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleSelectWayFun.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"select-value"},[t._v(t._s(t.selectList[t.activeIndex].label))]),a("v-uni-view",{staticClass:"trangle"})],1)],1)],1),a("slider-picker",{ref:"sliderPicker",attrs:{sliderList:t.selectList},on:{selectWay:function(e){arguments[0]=e=t.$handleEvent(e),t.handleSelectPayWayFun.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"confirm-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleConfirmBuyFun.apply(void 0,arguments)}}},[t._v("确认购买")])],1)},o=[]},fc84:function(t,e,a){"use strict";var n=a("801f"),i=a.n(n);i.a}}]);