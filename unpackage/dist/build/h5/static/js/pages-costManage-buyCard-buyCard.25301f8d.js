(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-costManage-buyCard-buyCard"],{"0aa0":function(e,t,a){"use strict";var n=a("dc39"),i=a.n(n);i.a},1148:function(e,t,a){"use strict";var n=a("a691"),i=a("1d80");e.exports="".repeat||function(e){var t=String(i(this)),a="",o=n(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(a+=t);return a}},"194f":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,"\nuni-view[data-v-8bee0ed2]{box-sizing:border-box}.buy-card--page .section[data-v-8bee0ed2]{margin:%?16?% 0;padding:%?48?%;background-color:#fff}.label[data-v-8bee0ed2]{font-size:%?32?%;line-height:%?32?%;color:#333}.value[data-v-8bee0ed2]{font-size:%?32?%;line-height:%?32?%;color:#333}.buy-card--page .buy-amount--section[data-v-8bee0ed2]{padding:0 %?48?%;background-color:#fff}.buy-card--page .buy-amount--section .amount-list[data-v-8bee0ed2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?2?% solid #f5f5f5}.buy-amount--section .amount-list .list-area[data-v-8bee0ed2]{padding:%?32?% 0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.amount-list .list-area .list-item[data-v-8bee0ed2]{margin-left:%?20?%;padding:%?8?% %?30?%;color:#666;font-size:%?28?%;line-height:%?40?%;border:%?2?% solid #ddd;border-radius:%?4?%}.amount-list .list-area .list-item.active[data-v-8bee0ed2]{color:#ed6c00;border-color:#ed6c00}.buy-amount--section .amount-input--area[data-v-8bee0ed2]{position:relative;padding:%?32?% 0;border-bottom:%?2?% solid #f5f5f5}.amount-input--area uni-input[data-v-8bee0ed2]{padding-right:%?48?%;text-align:right;font-size:%?28?%;color:#333;line-height:%?28?%}.count-area uni-input[data-v-8bee0ed2]{padding-right:%?20?%;text-align:right}.amount-input--area .prefix[data-v-8bee0ed2]{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);font-size:%?28?%;line-height:%?28?%;color:#333}.amount-input--area uni-input[data-v-8bee0ed2]::-webkit-input-placeholder{font-size:%?28?%;color:#999;line-height:%?28?%}.amount-input--area uni-input[data-v-8bee0ed2]::placeholder{font-size:%?28?%;color:#999;line-height:%?28?%}.total-way--seciton[data-v-8bee0ed2]{padding:0 %?48?%!important}.total-way--seciton .item[data-v-8bee0ed2]{padding:%?44?% 0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?2?% solid #f5f5f5}.total-way--seciton .item.select-count--area[data-v-8bee0ed2]{padding:%?32?% 0}.total-way--seciton .item[data-v-8bee0ed2]:last-of-type{border-bottom:none}.total-way--seciton .item .count-area[data-v-8bee0ed2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.total-way--seciton .item .count-area .minus[data-v-8bee0ed2],\n.total-way--seciton .item .count-area .incres[data-v-8bee0ed2]{width:%?60?%;height:%?60?%;text-align:center;line-height:%?52?%;font-size:%?32?%;color:#666;background-color:#f2f2f2;border:%?2?% solid #ddd;border-radius:%?4?%}.total-way--seciton .item .count-area .count[data-v-8bee0ed2]{height:%?60?%;line-height:%?56?%;width:%?80?%;text-align:center;font-size:%?28?%;color:#4a4a4a;border-top:%?2?% solid #ddd;border-bottom:%?2?% solid #ddd;background-color:#fff}.way-select--area .way-select--area[data-v-8bee0ed2]{position:relative}.way-select--area .way-select--area .select-value[data-v-8bee0ed2]{padding-right:%?26?%;font-size:%?28?%;color:#333;line-height:%?28?%}.way-select--area .way-select--area .trangle[data-v-8bee0ed2]{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:0;height:0;border-left:%?10?% solid transparent;border-right:%?10?% solid transparent;border-top:%?18?% solid #666}.confirm-btn[data-v-8bee0ed2]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:%?80?%;height:%?100?%;line-height:%?100?%;width:calc(100% - %?96?%);text-align:center;color:#fff;font-size:%?32?%;font-weight:500;border-radius:%?8?%;background-color:#464646}body.?%PAGE?%[data-v-8bee0ed2]{background-color:#f5f5f5}",""]),e.exports=t},"1eaf":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{wrapperShow:!1,contentShow:!1}},components:{},props:{sliderList:{type:Array,default:[]}},methods:{show:function(){var e=this;this.setData({wrapperShow:!0}),setTimeout((function(){e.setData({contentShow:!0})}),200)},hide:function(){var e=this;this.setData({contentShow:!1}),setTimeout((function(){e.setData({wrapperShow:!1})}),200)},handleSelectSliderValueFun:function(e){var t=e.currentTarget.dataset.index;if(t==this.sliderList.length-1)return this.hide(),!1;this.$emit("selectWay",{detail:t})}}};t.default=n},3422:function(e,t,a){"use strict";a.r(t);var n=a("c3be"),i=a("7fed");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("0aa0");var r,s=a("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"e95c2d94",null,!1,n["a"],r);t["default"]=c.exports},3616:function(e,t,a){"use strict";a.r(t);var n=a("4a01"),i=a("b95d");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("7c88");var r,s=a("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"8bee0ed2",null,!1,n["a"],r);t["default"]=c.exports},"408a":function(e,t,a){var n=a("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=n(e))throw TypeError("Incorrect invocation");return+e}},4858:function(e,t,a){"use strict";(function(e){var n=a("4ea4");a("99af"),a("a9e3"),a("b680"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("3b7d"),o=a("730f"),r=n(a("3422")),s={data:function(){return{amountList:[{label:100,value:100},{label:500,value:500},{label:1e3,value:1e3}],origin:"buy",activeIndex:0,valueStatus:"select",rechargeValue:100,total:Number(100).toFixed(2),selectActive:100,count:1,timer:null,placeholders:["请输入10或10以上的金额","请输入10～1000整数"]}},components:{sliderPicker:r.default},props:{},onLoad:function(e){e.origin&&this.setData({origin:e.origin})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{handleSelectPayWayFun:function(e){this.setData({activeIndex:e.detail}),this.$refs.sliderPicker.hide()},handleSelectValueFun:function(e){var t=e.currentTarget.dataset.value;this.setData({selectActive:t,rechargeValue:t,total:(t*this.count).toFixed(2),valueStatus:"select"})},handleInputValueFun:function(e){var t=e.detail.value;return this.setData({rechargeValue:t,total:(this.count*t).toFixed(2)}),t},handleCountValueFun:function(e){var t=e.detail.value;return this.setData({count:t,total:this.rechargeValue?(this.rechargeValue*t).toFixed(2):"0.00"}),t},handleBlurCountFun:function(e){var t=e.detail.value;return t>500&&(t=500),this.setData({count:t}),t},handleFocusFun:function(){"select"==this.valueStatus&&this.setData({selectActive:-1,rechargeValue:"",valueStatus:"input",total:0})},handleSelectWayFun:function(){this.$refs.sliderPicker.show()},handleConfirmBuyFun:function(){var t=this;this.rechargeValue&&Number(this.rechargeValue)>=10?(uni.showLoading({title:"支付中"}),0==this.activeIndex&&(0,i.get)({url:o.buy_card_by_account+"?amount=".concat(this.total,"&goods=").concat(this.rechargeValue,"&goodsNum=").concat(this.count),success:function(a){e.log(a),setTimeout((function(){uni.showToast({icon:"none",title:"礼品卡购买成功，已存至【礼品卡 - 可使用】清单中",duration:3e3})}),50),t.setData({timer:setTimeout((function(){"give"==t.origin&&uni.navigateTo({url:"/pages/costManage/giveWay/giveWay?origin="+t.origin+"&id="+a+"&money="+t.rechargeValue+"&count="+t.count}),"buy"==t.origin&&uni.redirectTo({url:"/pages/costManage/accountCard/accountCard?type=1&origin=result"})}),2e3)})},fail:function(a){e.log(a),uni.showModal({title:"购买失败",content:0==t.activeIndex?"账户余额不足，礼品卡购买失败，您可以先充值再购买礼品卡，或者直接使用微信支付购买":"购买失败",showCancel:!1,confirmText:"我知道了"})},complete:function(){uni.hideLoading()}}),this.activeIndex):setTimeout((function(){uni.showToast({icon:"none",title:"购买金额不能小于10元"})}),50)},getWxPayParamsFun:function(){var t=this;uni.showLoading({title:"创建订单中"}),(0,i.get)({url:o.get_wx_pay_params+"?amount="+this.total+"&body=微信支付&rechargeType=0&goods="+this.rechargeValue+"&goodsNum="+this.count,success:function(a){e.log(a),t.payByWxFun(a)},fail:function(e){setTimeout((function(){uni.showToast({icon:"none",title:e})}),50)},complete:function(){uni.hideLoading()}})},getZfbPayParamsFun:function(){var t=this;uni.showLoading({title:"创建订单中"}),(0,i.get)({url:o.get_wx_pay_params+"?amount="+this.total+"&body=支付宝支付&rechargeType=0&goods="+this.rechargeValue+"&goodsNum="+this.count,success:function(a){e.log(a),t.payByZfbFun(a)},fail:function(e){setTimeout((function(){uni.showToast({icon:"none",title:e})}),50)},complete:function(){uni.hideLoading()}})},payByWxFun:function(t){var a=this;this.rechargeValue&&uni.requestPayment({timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign,success:function(e){setTimeout((function(){uni.showToast({icon:"none",title:"支付成功"})}),50),a.setData({timer:setTimeout((function(){"give"==a.origin&&uni.navigateTo({url:"/pages/costManage/giveWay/giveWay?origin="+a.origin+"&id="+e+"&money="+a.rechargeValue+"&count="+a.count}),"buy"==a.origin&&uni.redirectTo({url:"/pages/costManage/accountCard/accountCard?type=1"})}),2e3)})},fail:function(t){e.log(t)},complete:function(){}})},payByZfbFun:function(e){this.rechargeValue&&my.tradePay({tradeNO:e,success:function(e){var t=this;setTimeout((function(){uni.showToast({icon:"none",title:"支付成功"})}),50),this.setData({timer:setTimeout((function(){"give"==t.origin&&uni.navigateTo({url:"/pages/costManage/giveWay/giveWay?origin="+t.origin+"&id="+e+"&money="+t.rechargeValue+"&count="+t.count}),"buy"==t.origin&&uni.redirectTo({url:"/pages/costManage/accountCard/accountCard?type=1"})}),2e3)})},fail:function(e){setTimeout((function(){uni.showToast({icon:"none",title:e})}),50)}})}}};t.default=s}).call(this,a("5a52")["default"])},"4a01":function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"buy-card--page"},[a("v-uni-view",{staticClass:"buy-amount--section section"},[a("v-uni-view",{staticClass:"amount-list"},[a("v-uni-view",{staticClass:"label"},[e._v("面值金额")]),a("v-uni-view",{staticClass:"list-area"},e._l(e.amountList,(function(t,n){return a("v-uni-view",{key:n,class:"list-item "+(e.selectActive==t.value&&"select"==e.valueStatus?"active":""),attrs:{"data-value":t.value},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSelectValueFun.apply(void 0,arguments)}}},[e._v(e._s(t.label)+"元")])})),1)],1),a("v-uni-view",{staticClass:"amount-input--area"},[a("v-uni-input",{attrs:{placeholder:e.placeholders[e.activeIndex],type:"number"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.handleInputValueFun.apply(void 0,arguments)},focus:function(t){arguments[0]=t=e.$handleEvent(t),e.handleFocusFun.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"prefix"},[e._v("元")])],1)],1),a("v-uni-view",{staticClass:"total-way--seciton section"},[a("v-uni-view",{staticClass:"select-count--area item"},[a("v-uni-view",{staticClass:"label"},[e._v("购买数量")]),a("v-uni-view",{staticClass:"count-area"},[a("v-uni-input",{attrs:{placeholder:"请输入礼品卡个数",type:"number",value:e.count},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.handleCountValueFun.apply(void 0,arguments)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.handleBlurCountFun.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"prefix"},[e._v("个")])],1)],1),a("v-uni-view",{staticClass:"total--area item"},[a("v-uni-view",{staticClass:"label"},[e._v("总金额")]),a("v-uni-view",{staticClass:"value"},[e._v("¥ "+e._s(e.total))])],1),a("v-uni-view",{staticClass:"way-select--area item"},[a("v-uni-view",{staticClass:"label"},[e._v("购买方式")]),a("v-uni-view",{staticClass:"way-select--area",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSelectWayFun.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"select-value"},[e._v(e._s(e.selectList[e.activeIndex].label))]),a("v-uni-view",{staticClass:"trangle"})],1)],1)],1),a("slider-picker",{ref:"sliderPicker",attrs:{sliderList:e.selectList},on:{selectWay:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSelectPayWayFun.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"confirm-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleConfirmBuyFun.apply(void 0,arguments)}}},[e._v("确认购买")])],1)},o=[]},"730f":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buy_package=t.get_package_list=t.get_account_and_card_info=t.send_card_directive=t.send_by_buy=t.get_company_auth_status=t.get_personal_auth_status=t.cancel_hare_card=t.share_card=t.get_wx_pay_params=t.buy_card_by_account=t.get_card_list=t.get_balance_list=t.get_accout_info=t.get_gift_card_status=t.get_gift_card_from_wx=void 0;var n=a("3b7d"),i=n.host+"/v1/expense/receiveShareGiftCard/";t.get_gift_card_from_wx=i;var o=n.host+"/v1/expense/transferGiftCardTimeout/";t.get_gift_card_status=o;var r=n.host+"/v1/account/getCurrentUserOrCompanyInfo";t.get_accout_info=r;var s=n.host+"/v1/expense/consumptionDetailsList";t.get_balance_list=s;var c=n.host+"/v1/expense/couponList";t.get_card_list=c;var u=n.host+"/v1/pay/account/pay";t.buy_card_by_account=u;var l=n.host+"/v1/pay/create/order";t.get_wx_pay_params=l;var d=n.host+"/v1/expense/shareGiftCard";t.share_card=d;var f=n.host+"/v1/expense/cancelShareGiftCard/";t.cancel_hare_card=f;var v=n.host+"/v1/account/user/getAuthUserInfoByNameAndPhone";t.get_personal_auth_status=v;var h=n.host+"/v1/account/company/getOneAuthCompanyByName";t.get_company_auth_status=h;var p=n.host+"/v1/expense/batchTransfer";t.send_by_buy=p;var g=n.host+"/v1/expense/transfer";t.send_card_directive=g;var b=n.host+"/v1/expense/accountBalance";t.get_account_and_card_info=b;var y=n.host+"/v1/contractExpense/listContractSetMeals";t.get_package_list=y;var w=n.host+"/v1/contractExpense/purchaseContractSetMeal";t.buy_package=w},"7c88":function(e,t,a){"use strict";var n=a("d237"),i=a.n(n);i.a},"7fed":function(e,t,a){"use strict";a.r(t);var n=a("1eaf"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},a04e:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".slider-picker--area[data-v-e95c2d94]{position:fixed;top:0;left:0;width:100%;height:100%;display:none;z-index:39}.wrapper-show[data-v-e95c2d94]{display:block}.slider-picker--area .mask[data-v-e95c2d94]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5)}\n.slider-picker--area .slider-box[data-v-e95c2d94]{position:absolute;left:0;bottom:50px;-webkit-transform:translateY(100%);transform:translateY(100%);padding:%?10?% %?48?%;width:100%;background-color:#fff;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;box-sizing:border-box}\n.slider-picker--area .slider-box.content-show[data-v-e95c2d94]{-webkit-transform:translateY(0);transform:translateY(0)}.slider-picker--area .slider-box .slider-item[data-v-e95c2d94]{width:100%;height:%?104?%;line-height:%?104?%;text-align:center;border-bottom:%?2?% solid #e6e6e6;font-size:%?32?%;color:#212121}.slider-picker--area .slider-box .slider-item[data-v-e95c2d94]:last-of-type{color:#999;border-bottom:none}",""]),e.exports=t},b680:function(e,t,a){"use strict";var n=a("23e7"),i=a("a691"),o=a("408a"),r=a("1148"),s=a("d039"),c=1..toFixed,u=Math.floor,l=function(e,t,a){return 0===t?a:t%2===1?l(e,t-1,a*e):l(e*e,t/2,a)},d=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},f=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));n({target:"Number",proto:!0,forced:f},{toFixed:function(e){var t,a,n,s,c=o(this),f=i(e),v=[0,0,0,0,0,0],h="",p="0",g=function(e,t){var a=-1,n=t;while(++a<6)n+=e*v[a],v[a]=n%1e7,n=u(n/1e7)},b=function(e){var t=6,a=0;while(--t>=0)a+=v[t],v[t]=u(a/e),a=a%e*1e7},y=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==v[e]){var a=String(v[e]);t=""===t?a:t+r.call("0",7-a.length)+a}return t};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(h="-",c=-c),c>1e-21)if(t=d(c*l(2,69,1))-69,a=t<0?c*l(2,-t,1):c/l(2,t,1),a*=4503599627370496,t=52-t,t>0){g(0,a),n=f;while(n>=7)g(1e7,0),n-=7;g(l(10,n,1),0),n=t-1;while(n>=23)b(1<<23),n-=23;b(1<<n),g(1,1),b(2),p=y()}else g(0,a),g(1<<-t,0),p=y()+r.call("0",f);return f>0?(s=p.length,p=h+(s<=f?"0."+r.call("0",f-s)+p:p.slice(0,s-f)+"."+p.slice(s-f))):p=h+p,p}})},b95d:function(e,t,a){"use strict";a.r(t);var n=a("4858"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},c3be:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{class:"slider-picker--area "+(e.wrapperShow?"wrapper-show":"")},[a("v-uni-view",{staticClass:"mask",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.hide.apply(void 0,arguments)}}}),a("v-uni-view",{class:"slider-box "+(e.contentShow?"content-show":"")},e._l(e.sliderList,(function(t,n){return a("v-uni-view",{key:n,staticClass:"slider-item",attrs:{"data-value":t.value,"data-index":n},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSelectSliderValueFun.apply(void 0,arguments)}}},[e._v(e._s(t.label))])})),1)],1)},o=[]},d237:function(e,t,a){var n=a("194f");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("74b3773e",n,!0,{sourceMap:!1,shadowMode:!1})},dc39:function(e,t,a){var n=a("a04e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("13913480",n,!0,{sourceMap:!1,shadowMode:!1})}}]);