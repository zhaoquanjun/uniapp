<wxs src="../../../utils/tools.wxs" module="tools"></wxs>
<view><block wx:if="{{!isVoiceRecord}}"><view class="add-certificate-box"><form data-event-opts="{{[['submit',[['addCertificateSubmit',['$event']]]]]}}" bindsubmit="__e"><view class="certificate-content-item"><block wx:if="{{type==='image'}}"><view class="certificate-content-item--image"><view class="h1">上传图片</view><view class="add-certificate-image"><view class="add-certificate-image--item"><image class="image-add" mode="aspectFit" src="{{addCertificateImageUrl||'https://shouyiner-prod.oss-cn-beijing.aliyuncs.com/wxapp/shanqian/certificate/add.png'}}" data-event-opts="{{[['tap',[['tapAddImage',['$event']]]]]}}" catchtap="__e"></image><block wx:if="{{addCertificateImageUrl}}"><view class="image-delete one-close" data-index="{{index}}" data-event-opts="{{[['tap',[['tapDeleteImage',['$event']]]]]}}" catchtap="__e"></view></block></view></view></view></block><block wx:if="{{type==='voice'}}"><view class="certificate-content-item--voice"><view class="h1">{{(addCertificateVoice?'语音文件':'上传语音')+''}}</view><block wx:if="{{!addCertificateVoice}}"><view data-event-opts="{{[['tap',[['openVoiceRecord',['$event']]]]]}}" class="input-name" catchtap="__e">录制语音<view class="icon-right one-arrow-right"></view></view></block><block wx:if="{{addCertificateVoice}}"><view class="add-certificate-voice"><view class="add-certificate-voice-progress"><view data-event-opts="{{[['tap',[['playVoice',['$event']]]]]}}" class="{{['add-certificate-voice-progress--btn '+(isPlay?'one-stop-round':'one-start-round')]}}" catchtap="__e"></view><text class="add-certificate-voice-progress--start">{{showVideoPlayTime}}</text><view class="add-certificate-voice-progress--loading"><view class="add-certificate-voice-progress--width" style="{{('width:'+(videoPlayTime*100000/duration+'%'))}}"></view></view><text class="add-certificate-voice-progress--end">{{showDurationTime}}</text></view><view class="size">{{"音频大小："+addFileInfo.size}}<block wx:if="{{addFileInfo.size}}"><text>M</text></block></view><view data-event-opts="{{[['tap',[['tapDeleteVoice',['$event']]]]]}}" class="add-certificate-voice-delete one-close" catchtap="__e"></view></view></block></view></block><block wx:if="{{type==='file'}}"><view class="certificate-content-item--file"><view class="h1" style="margin-top:32rpx;">选择文件</view><block wx:if="{{addFileInfo.size}}"><view class="file-size">{{"文件大小："+addFileInfo.size}}<text>M</text></view></block><view data-event-opts="{{[['tap',[['handleChooseFileFun',['$event']]]]]}}" class="upload-btn" bindtap="__e">选择上传文件</view></view></block></view><view class="certificate-content-item"><view class="h1">命名文件</view><input class="input-name" name="name" maxLength="20" placeholder="最多20个字符，命名不能出现字符有：/：*？#”<>|。" data-event-opts="{{[['input',[['nameInput',['$event']]]]]}}" value="{{nameValue}}" bindinput="__e"/></view><view class="certificate-content-item"><view class="h1">存证类型</view><view class="sign-certificate-type"><radio-group name="type"><label><radio value="2" checked="{{true}}"></radio><text class="label-text">司法存证</text><view class="label-detail">安全可信存证、国家授权时间、数据直连司法、司法效力</view></label></radio-group></view></view><view class="certificate-content-item"><view class="add-certificate-description"><view class="title">说明</view><view>1. 一次仅支持上传一个文件；</view><view>2. 所选文件将按照国密SM3算法计算Hash；</view><view>3. 链上不存储原文件，仅存储Hash。</view><block wx:if="{{type==='file'}}"><view>4. 建议上传文件大小不超过1G。</view></block><block wx:if="{{type==='voice'}}"><view>4. 建议上传音频时长不超过两个小时，录制时长最长支持十分钟。</view></block></view></view><button class="certificate-submit" form-type="submit">{{formId?'保存':'立即出证'}}</button></form></view></block><block wx:if="{{type==='voice'&&isVoiceRecord}}"><view class="voice-record-box"><view class="voice-record-content"><view class="voice-record-time">{{showTime||'00:00:00'}}</view><view class="voice-record-time-text">{{time?'正在录音… 点击按钮暂停录音自动保存':'点击按钮开始录音'}}</view><view class="{{[' '+(recording?'voice-record-btn voice-record-btn-loading':'voice-record-btn')]}}"><view data-event-opts="{{[['tap',[['longPressBtn',['$event']]]]]}}" class="voice-record-btn-center" catchtap="__e"></view></view></view></view></block></view>