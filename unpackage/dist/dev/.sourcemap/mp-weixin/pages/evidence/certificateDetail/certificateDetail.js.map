{"version":3,"sources":["uni-app:///main.js","webpack:////Users/icourt/Desktop/mycode/uni/pages/evidence/certificateDetail/certificateDetail.vue?bcdb","webpack:////Users/icourt/Desktop/mycode/uni/pages/evidence/certificateDetail/certificateDetail.vue?030f","webpack:////Users/icourt/Desktop/mycode/uni/pages/evidence/certificateDetail/certificateDetail.vue?e799","webpack:////Users/icourt/Desktop/mycode/uni/pages/evidence/certificateDetail/certificateDetail.vue?1789","uni-app:///pages/evidence/certificateDetail/certificateDetail.vue","webpack:////Users/icourt/Desktop/mycode/uni/pages/evidence/certificateDetail/certificateDetail.vue?8392","webpack:////Users/icourt/Desktop/mycode/uni/pages/evidence/certificateDetail/certificateDetail.vue?aff6","webpack:////Users/icourt/Desktop/mycode/uni/utils/tools.wxs?7673","webpack:////Users/icourt/Desktop/mycode/uni/utils/tools.wxs?daab"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,0I;AACAA,UAAU,CAACC,0BAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwU;AACxU;AACqE;AACL;AACa;;;AAG7E;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,uFAAM;AACR,EAAE,sSAAM;AACR,EAAE,+SAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0SAAU;AACZ;AACA;;AAEA;AACiO;AACjO,WAAW,2OAAM,iBAAiB,mPAAM;;AAExC;AACe,gF;;;;;;;;;;;;AC3Bf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sNAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5CA;AAAA;AAAA;AAAA;AAA81B,CAAgB,+yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkGl3B;;;AAGA,yE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,mEACA,mBACA,iBACA,sDACA,oB,CAAA;AACA;AACA,gBACA,qBADA,EAEA,uBAFA,EAGA,uBAHA,EAIA,uBAJA,EAKA,iBALA,G,mXASA,EACA,IADA,kBACA,CACA,SACA,MADA,EACA;AACA,oBAFA,EAEA;AACA,kBAHA,EAIA;AACA,gCALA,EAMA;AACA,iBAPA,EAQA;AACA,mBATA,EAUA;AACA,sBAXA,EAYA;AACA,mCAbA,EAcA;AACA,qBAfA,EAgBA;AACA,gBAjBA,EAkBA,YAlBA,EAmBA,kBAnBA,EAoBA,gBApBA,EAqBA,gBArBA,GAuBA,CAzBA,EA2BA,cACA,4BADA,EA3BA,EA8BA,SA9BA,EA+BA;AACA,oCACA,eACA,cADA,IAGA,oBACA,uBACA,CAtCA,EAwCA,OAxCA,qBAwCA,CACA,eACA,+CADA,IAGA,CA5CA,EA8CA,WACA,aADA,yBACA,CADA,EACA,CACA,kEACA,yBACA,+CACA,CALA,EAOA,YAPA,wBAOA,CAPA,EAOA,CACA,0BACA,0BACA,0BACA,CAXA,EAaA;AACA,4DACA,kBACA,YADA,IAGA,uDACA,oBACA;AACA,gBAFA,EAGA,gCACA,iCACA,gBACA,mBADA,EAEA,UAFA,EAGA,wBAHA,IAMA,yBACA,uEACA,kBACA,YADA,IAGA,oBACA,SADA,EAEA,gCACA,6BACA,CAJA,EAKA,0BACA,wBACA,gBACA,YADA,EAEA,UAFA;AAIA,iBALA,EAKA,EALA;AAMA,eAZA;AAaA;AACA;AACA,eAfA;;AAiBA;AACA,SAlCA;AAmCA;AACA;AACA;AACA,0BADA;AAEA,wBAFA;;AAIA,WALA,EAKA,EALA;AAMA,SA1CA;AA2CA;AACA;AACA,SA7CA;;AA+CA,KAlEA;;AAoEA;AACA;AACA,wCADA;AAEA;AACA;AACA;AACA,oCADA;;AAGA,SAPA;AAQA;AACA;AACA,SAVA;;AAYA,KAjFA;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA,sEADA,CACA;;;AAGA;AACA,8CADA;AAEA,qCAFA;;AAIA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA;AACA,yBADA;AAEA,4BAFA;AAGA,yCAHA;;AAKA,SARA;AASA;AACA;AACA;AACA;AACA,kDADA;AAEA,yCAFA;;AAIA;AACA,SARA;AASA,OA7BA,EA6BA,GA7BA;AA8BA,KArHA;AAsHA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAtIA;AAuIA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8BADA;AAEA,wCAFA;;AAIA,OATA,EASA,IATA;AAUA,KApJA;AAqJA;AACA;AACA,sBADA,CACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBADA;;AAGA,SAJA;AAKA,OARA,MAQA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA;;AAEA;AACA,SAPA;AAQA;AACA,KA5KA;AA6KA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,8BADA;AAEA,wBAFA;;AAIA,SALA,EAKA,EALA;AAMA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBADA;;;AAIA;AACA,gBADA;AAEA;AACA;AACA,SAJA;AAKA;AACA;AACA;AACA,0BADA;AAEA,wBAFA;;AAIA,WALA,EAKA,EALA;AAMA,SAZA;AAaA;AACA;AACA,SAfA;;AAiBA,KApNA;;AAsNA;AACA,kBAvNA,0BAuNA,GAvNA,EAuNA,MAvNA,EAuNA;AACA;AACA;AACA,gBADA;AAEA;AACA;AACA;AACA;AACA,4BADA;;AAGA;AACA,SATA;AAUA;AACA;AACA;AACA,SAbA;AAcA,2CAdA;;AAgBA,KAzOA;;AA2OA,cA3OA,sBA2OA,QA3OA,EA2OA;AACA;AACA;AACA,0BADA;AAEA,uBAFA;AAGA,sBAHA;AAIA;AACA;AACA,SANA;AAOA;AACA;AACA,SATA;AAUA;AACA;AACA,SAZA;;AAcA,KA3PA;;AA6PA;;;AAGA,mBAhQA,6BAgQA;AACA;AACA,sCADA;AAEA,oBAFA;AAGA,sBAHA;;AAKA;AACA,0CADA;AAEA,sBAFA;AAGA;AACA;AACA,kCADA;;AAGA,SAPA;;AASA,KA/QA;;AAiRA;;;AAGA,oBApRA,4BAoRA,CApRA,EAoRA;AACA;AACA;AACA,+FADA;;AAGA,KAzRA;;AA2RA;;;AAGA,iBA9RA,2BA8RA;AACA;AACA,KAhSA;;AAkSA;;;AAGA,mBArSA,6BAqSA;AACA;AACA;AACA,+EADA;;AAGA,KA1SA;AA2SA;;;;;AAKA,qBAhTA,6BAgTA,SAhTA,EAgTA,GAhTA,EAgTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KArUA,EA9CA,E;;;;;;;;;;;;;ACzHA;AAAA;AAAA;AAAA;AAAitC,CAAgB,4mCAAG,EAAC,C;;;;;;;;;;;ACAruC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA,wCAA6X,CAAgB,0bAAG,EAAC,C;;;;;;;;;;;;ACAjZ;AAAe;AACf;AACA;AACA;;AAEA,M","file":"pages/evidence/certificateDetail/certificateDetail.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/evidence/certificateDetail/certificateDetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./certificateDetail.vue?vue&type=template&id=c84ddffc&filter-modules=eyJ0b29scyI6eyJ0eXBlIjoic2NyaXB0IiwiY29udGVudCI6IiIsInN0YXJ0Ijo0ODY4LCJhdHRycyI6eyJtb2R1bGUiOiJ0b29scyIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi8uLi91dGlscy90b29scy53eHMifSwiZW5kIjo0ODY4fX0%3D&\"\nvar renderjs\nimport script from \"./certificateDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./certificateDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./certificateDetail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* custom blocks */\nimport block0 from \"../../../utils/tools.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Ficourt%2FDesktop%2Fmycode%2Funi%2Fpages%2Fevidence%2FcertificateDetail%2FcertificateDetail.vue&module=tools&lang=wxs\"\nif (typeof block0 === 'function') block0(component)\n\ncomponent.options.__file = \"pages/evidence/certificateDetail/certificateDetail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=template&id=c84ddffc&filter-modules=eyJ0b29scyI6eyJ0eXBlIjoic2NyaXB0IiwiY29udGVudCI6IiIsInN0YXJ0Ijo0ODY4LCJhdHRycyI6eyJtb2R1bGUiOiJ0b29scyIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi8uLi91dGlscy90b29scy53eHMifSwiZW5kIjo0ODY4fX0%3D&\"","var components\ntry {\n  components = {\n    halfSlideItem: function() {\n      return import(\n        /* webpackChunkName: \"components/halfSlideItem/halfSlideItem\" */ \"@/components/halfSlideItem/halfSlideItem.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.formatTimeConvert(_vm.dataList.gmtCreate, 0)\n  var m1 = _vm.formatTimeConvert(_vm.dataList.gmtModified, 0)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"certificate-detail-box\">\r\n\r\n\t\t\t<view style=\"display:flex; justify-content:space-between\">\r\n\t\t\t\t<view class=\"certificate-title\">存证名称</view>\r\n\t\t\t\t<view style=\"display:flex; justify-content:flex-end;\">\r\n\t\t\t\t\t<view class=\"certificate-detail-preview\" @tap=\"showSlideMenu\">更多操作</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"certificate-detail-items\">\r\n\t\t\t\t<view class=\"certificate-detail-item\">\r\n\t\t\t\t\t<view class=\"certificate-detail-item-name\">存证名称</view>\r\n\t\t\t\t\t<view class=\"certificate-detail-item-value\">{{dataList.name || ''}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"certificate-detail-item\">\r\n\t\t\t\t\t<view class=\"certificate-detail-item-name\">存证类型</view>\r\n\t\t\t\t\t<view class=\"certificate-detail-item-value\">{{dataList.fileType ==1 ? \"文本\" : dataList.fileType==2 ? \"图片\" : dataList.fileType == 3 ? \"语音\" : dataList.fileType == 4 ?\" 视频\": \"签署存证\"}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"certificate-detail-item\">\r\n\t\t\t\t\t<view class=\"certificate-detail-item-name\">存证渠道</view>\r\n\t\t\t\t\t<view class=\"certificate-detail-item-value\">手机端</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"certificate-detail-item\">\r\n\t\t\t\t\t<view class=\"certificate-detail-item-name\">存证方式</view>\r\n\t\t\t\t\t<view class=\"certificate-detail-item-value\">{{dataList.uploadMethod ==1 ? \"上传\":\"拍摄\"}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"certificate-detail-item\">\r\n\t\t\t\t\t<view class=\"certificate-detail-item-name\">存证时间</view>\r\n\t\t\t\t\t<view class=\"certificate-detail-item-value\">{{formatTimeConvert(dataList.gmtCreate, 0)}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"certificate-detail-item\">\r\n\t\t\t\t\t<view class=\"certificate-detail-item-name\">存证状态</view>\r\n\t\t\t\t\t<view class=\"certificate-detail-item-value\">{{dataList.status ==0 ? \"出证中...\":dataList.status==1?\"出证成功\":\"出证失败\"}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"certificate-title\">文件信息</view>\r\n\t\t\t<view class=\"certificate-detail-file\">\r\n\t\t\t\t<view v-if=\"dataList.fileType === 1\" class=\"certificate-detail-file-text\">{{textContext}}</view>\r\n\t\t\t\t<image @tap.stop=\"checkImage\" mode=\"aspectFit\" v-if=\"dataList.fileType === 2\" class=\"certificate-detail-file-content-picture\"\r\n\t\t\t\t :data-src=\"dataList.filePath\" :src=\"dataList.filePath\"></image>\r\n\t\t\t\t<view v-if=\"dataList.fileType === 3\" class=\"add-certificate-voice\">\r\n\t\t\t\t\t<audio :src=\"dataList.filePath\" :name=\"dataList.name\" author id=\"myAudio\" @tap=\"handlePlayFun\" @ended=\"playToEndFun\"\r\n\t\t\t\t\t controls></audio>\r\n\t\t\t\t</view>\r\n\t\t\t\t<video @tap.stop=\"checkVideo\" v-if=\"dataList.fileType === 4\" id=\"videoBox\" class=\"certificate-detail-file-content-video\"\r\n\t\t\t\t :src=\"dataList.filePath\" @Error=\"videoError\"></video>\r\n\t\t\t\t<view class=\"pdf-file\" v-if=\"dataList.fileType === 5\" @tap=\"previewCertificate\">\r\n\t\t\t\t\t<image src=\"https://shouyiner-prod.oss-cn-beijing.aliyuncs.com/wxapp/shanqian/certificate/file.png\" class=\"file-image\"></image>\r\n\t\t\t\t\t<text>{{dataList.fileName}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"display:flex; justify-content:space-between\">\r\n\t\t\t\t<view class=\"certificate-title\">证书信息</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<view class=\"certificate-detail-items\">\r\n\t\t\t\t<view class=\"certificate-detail-item\">\r\n\t\t\t\t\t<view class=\"certificate-detail-item-name\">存证hash</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"certificate-detail-item\">\r\n\t\t\t\t\t<view class=\"certificate-detail-item-value\">{{dataList.hash || ''}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"height:20rpx; width=100%; background:#F7F8F9\"></view>\r\n\t\t\t<view class=\"certificate-detail-items\">\r\n\t\t\t\t<view class=\"certificate-detail-item\">\r\n\t\t\t\t\t<view class=\"certificate-detail-item-name\">认证时间</view>\r\n\t\t\t\t\t<view class=\"certificate-detail-item-value\">{{formatTimeConvert(dataList.gmtModified, 0)}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"certificate-detail-item\">\r\n\t\t\t\t\t<view class=\"certificate-detail-item-name\">证书状态</view>\r\n\t\t\t\t\t<view class=\"certificate-detail-item-value\">{{dataList.status ==0 ? \"出证中...\":dataList.status==1?\"出证成功\":\"出证失败\"}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 关联合同 -->\r\n\t\t\t<view class=\"certificate-title\" v-if=\"dataList.evidenceType == 1 && contractList.length > 0\">关联合同</view>\r\n\t\t\t<view class=\"certificate-detail-items\" v-if=\"dataList.evidenceType == 1\">\r\n\t\t\t\t<view v-for=\"(item, index) in contractList\" :key=\"index\" class=\"certificate-detail-item\">\r\n\t\t\t\t\t<view class=\"certificate-detail-item-name undeContranct\" :data-contractid=\"item.id\" @tap=\"goContractDetail\">{{ item.contractTitle }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 证据链菜单 -->\r\n\t\t<halfSlideItem ref=\"evidence\">\r\n\t\t\t<view class=\"slide-menu_list\">\r\n\t\t\t\t<view class=\"slide-menu_item\" @tap=\"previewCertificate\">查看证书</view>\r\n\t\t\t\t<view class=\"slide-menu_item\" @tap=\"goChainListPage\" v-if=\"dataList.evidenceType == 1\">查看证据链</view>\r\n\t\t\t</view>\r\n\t\t</halfSlideItem>\r\n\t\t<!-- <view class='empty-data placeholder-color' wx:if=\"{{dataList.length <= 0}}\">暂无数据</view> -->\r\n\t</view>\r\n</template>\r\n\r\n<script module=\"tools\" lang=\"wxs\" src=\"../../../utils/tools.wxs\"></script>\r\n\r\n<script>\r\n\timport {\r\n\t\tget\r\n\t} from '../../../api/request.js'\r\n\timport {\r\n\t\tevidence_detail,\r\n\t\tget_certificate_address,\r\n\t\tfindContractSubject\r\n\t} from '../../../api/evidence.js'\r\n\tlet utils = require(\"../../../utils/utils.js\");\r\n\tlet app = getApp();\r\n\tlet timer = null;\r\n\tlet innerAudioContext = uni.createInnerAudioContext();\r\n\tlet videoBox = null; // 存证类型icon的MAP\r\n\t// 存证类型icon的MAP\r\n\tlet iconMap = {\r\n\t\t1: 'one-filetype-doc',\r\n\t\t2: 'one-filetype-image',\r\n\t\t3: 'one-filetype-music',\r\n\t\t4: 'one-filetype-video',\r\n\t\t5: 'one-contract'\r\n\t};\r\n\timport halfSlideItem from \"../../../components/halfSlideItem/halfSlideItem\";\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\n\t\t\t\tid: '', // 证据id\r\n\t\t\t\tcontractId: \"\", // 合同id\r\n\t\t\t\tdataList: {},\r\n\t\t\t\t// 存证详情数据\r\n\t\t\t\ticon: 'one-filetype-image',\r\n\t\t\t\t// 存证类型icon\r\n\t\t\t\tduration: 0,\r\n\t\t\t\t//声音类型音频时长\r\n\t\t\t\tisPlay: false,\r\n\t\t\t\t// 声音是否播放\r\n\t\t\t\tvideoPlayTime: 0,\r\n\t\t\t\t// 音频播放时间time\r\n\t\t\t\tshowVideoPlayTime: '00:00:00',\r\n\t\t\t\t//音频播放显示时间\r\n\t\t\t\ttextContext: '',\r\n\t\t\t\t// 文本内容\r\n\t\t\t\tpdfUrl: '',\r\n\t\t\t\ttype: 'sign',\r\n\t\t\t\taudioContext: null,\r\n\t\t\t\tcontractList: [],\r\n\t\t\t\tdurationShow: \"\"\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tcomponents: {\r\n\t\t\thalfSlideItem\r\n\t\t},\r\n\t\tprops: {},\r\n\t\t// 页面load加载数据\r\n\t\tonLoad: function(options) {\n\t\t\tthis.setData({\n\t\t\t\tid: options.id\n\t\t\t})\r\n\t\t\tthis.fetchRecords();\r\n\t\t\tthis.getContractList();\r\n\t\t},\r\n\r\n\t\tonReady() {\r\n\t\t\tthis.setData({\r\n\t\t\t\taudioContext: uni.createAudioContext('myAudio')\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\thandlePlayFun(e) {\r\n\t\t\t\tconsole.log(this.audioContext, this.audioContext._getAppStatus());\r\n\t\t\t\tthis.audioContext.play();\r\n\t\t\t\tconsole.log(this.audioContext._getAppStatus());\r\n\t\t\t},\r\n\r\n\t\t\tplayToEndFun(e) {\r\n\t\t\t\tthis.audioContext.pause();\r\n\t\t\t\tthis.audioContext.seek(0);\r\n\t\t\t\tthis.audioContext.pause();\r\n\t\t\t},\r\n\r\n\t\t\t// 获取存证详情\r\n\t\t\tfetchRecords: function() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tvar url = evidence_detail + '?id=' + this.id;\r\n\t\t\t\tget({\r\n\t\t\t\t\t// get请求\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tlet icon = iconMap[res.fileType];\r\n\t\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t\tdataList: res || {},\r\n\t\t\t\t\t\t\ticon: icon,\r\n\t\t\t\t\t\t\tcontractId: res.filePath\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (res.fileType === 5) {\r\n\t\t\t\t\t\t\tconst url = get_certificate_address + \"/\" + this.dataList.id;\r\n\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tget({\r\n\t\t\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\tthis.downloadPdfFun(res, 0);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\t\t\ttitle: err\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\ttitle: err\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t},\n\t\t\t\t\tcomplete:() => {\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tcheckImage: function(e) {\r\n\t\t\t\twx.downloadFile({\r\n\t\t\t\t\turl: e.currentTarget.dataset.src,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log(res, 'dasdasdas')\r\n\t\t\t\t\t\twx.previewImage({\r\n\t\t\t\t\t\t\turls: [res.tempFilePath],\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 打开音频函数 试用innerAudioContext的api\r\n\t\t\tsetVoice: function() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar url = this.dataList.filePath;\r\n\t\t\t\tinnerAudioContext.src = url || '';\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tvar _durationShow = that.showTime(innerAudioContext.duration); // 播放时间显示\r\n\r\n\r\n\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\tduration: innerAudioContext.duration,\r\n\t\t\t\t\t\tdurationShow: _durationShow\r\n\t\t\t\t\t});\r\n\t\t\t\t\tinnerAudioContext.onError(res => {\r\n\t\t\t\t\t\tconsole.log(res.errMsg);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tinnerAudioContext.onEnded(res => {\r\n\t\t\t\t\t\tinnerAudioContext.stop();\r\n\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\tisPlay: false,\r\n\t\t\t\t\t\t\tvideoPlayTime: 0,\r\n\t\t\t\t\t\t\tshowVideoPlayTime: '00:00:00'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tinnerAudioContext.onTimeUpdate(res => {\r\n\t\t\t\t\t\tif (innerAudioContext.duration && !that.duration) {\r\n\t\t\t\t\t\t\t_durationShow = that.showTime(innerAudioContext.duration);\r\n\t\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\t\tduration: innerAudioContext.duration,\r\n\t\t\t\t\t\t\t\tdurationShow: _durationShow\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 200);\r\n\t\t\t},\r\n\t\t\t// 音频显示函数\r\n\t\t\tshowTime: function(time) {\r\n\t\t\t\tfunction formatShow(value) {\r\n\t\t\t\t\treturn value < 10 ? '0' + value : value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sec = parseInt(time % 60);\r\n\r\n\t\t\t\tvar _min = parseInt(time / 60);\r\n\r\n\t\t\t\tvar min = parseInt(_min % 24);\r\n\t\t\t\tvar hour = parseInt(_min / 24);\r\n\t\t\t\thour = formatShow(hour);\r\n\t\t\t\tmin = formatShow(min);\r\n\t\t\t\tsec = formatShow(sec);\r\n\t\t\t\treturn hour + ':' + min + ':' + sec;\r\n\t\t\t},\r\n\t\t\t// 设置定时函数 显示播放时间\r\n\t\t\tsetTime: function() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\ttimer = setInterval(function() {\r\n\t\t\t\t\tlet _time = that.videoPlayTime + 1;\r\n\r\n\t\t\t\t\tvar _formatTime = that.showTime(_time);\r\n\r\n\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\tvideoPlayTime: _time,\r\n\t\t\t\t\t\tshowVideoPlayTime: _formatTime\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\t//播放声音函数\r\n\t\t\tplayVoice: function() {\r\n\t\t\t\tvar that = this; // if (!this.data.duration) return\r\n\r\n\t\t\t\tif (this.isPlay) {\r\n\t\t\t\t\tinnerAudioContext.pause();\r\n\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\tinnerAudioContext.onPause(() => {\r\n\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\tisPlay: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinnerAudioContext.play();\r\n\t\t\t\t\tinnerAudioContext.onPlay(() => {\r\n\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\tisPlay: true\r\n\t\t\t\t\t\t}); // 设置定时函数同步显示时间\r\n\r\n\t\t\t\t\t\tthis.setTime();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 预览下载\r\n\t\t\tpreviewCertificate: function(e) {\n\t\t\t\t\n\t\t\t\tthis.$refs.evidence.close()\r\n\r\n\t\t\t\tif (this.dataList.status !== 1) {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '出证中，请稍后再试',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar hash = this.dataList.hash;\r\n\t\t\t\tif (!hash) return;\r\n\t\t\t\tvar url = get_certificate_address + \"/\" + this.dataList.id;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\r\n\t\t\t\tget({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tthis.downloadPdfFun(res, 1);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\ttitle: err\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, 50)\r\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 打开pdf文件\r\n\t\t\tdownloadPdfFun(url, status) {\r\n\t\t\t\tconsole.log(url);\r\n\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconst filePath = res.tempFilePath;\r\n\t\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t\tpdfUrl: filePath\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (status) this.openPdfFun(filePath);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function(res) {}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\topenPdfFun(filePath) {\r\n\t\t\t\tconsole.log(filePath);\r\n\t\t\t\tuni.openDocument({\r\n\t\t\t\t\tfilePath: filePath,\r\n\t\t\t\t\tfileType: 'pdf',\r\n\t\t\t\t\tshowMenu: true,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log(res, 'success');\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\tconsole.log(err, 'fail');\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tconsole.log('complete');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * @desc 获取关联合同\r\n\t\t\t */\r\n\t\t\tgetContractList() {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tcertificateEvidenceId: this.id,\r\n\t\t\t\t\tpageIndex: 0,\r\n\t\t\t\t\tpageSize: 1000\r\n\t\t\t\t};\r\n\t\t\t\tget({\r\n\t\t\t\t\turl: findContractSubject,\r\n\t\t\t\t\tparams: params,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t\tcontractList: res.data\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * @desc 跳转合同详情\r\n\t\t\t */\r\n\t\t\tgoContractDetail(e) {\r\n\t\t\t\tconst contractId = e.currentTarget.dataset.contractid;\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/pages/contract/sign/next/contractDetail/contractDetail?contractId=\" + contractId\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * @desc 更多操作\r\n\t\t\t */\r\n\t\t\tshowSlideMenu() {\n\t\t\t\tthis.$refs.evidence.open()\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * @desc 查看证据链\r\n\t\t\t */\r\n\t\t\tgoChainListPage() {\n\t\t\t\tthis.$refs.evidence.close()\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/pages/contract/contractList/chains/chains?id=\" + this.contractId\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @name 时间格式化\r\n\t\t\t * @param {*} timestamp \r\n\t\t\t * @param {*} num \r\n\t\t\t */\r\n\t\t\tformatTimeConvert(timestamp, num) {\r\n\t\t\t\ttimestamp = timestamp + '';\r\n\t\t\t\ttimestamp = timestamp.length == 10 ? timestamp * 1000 : timestamp;\r\n\t\t\t\tvar date = new Date(Number(timestamp));\r\n\t\t\t\tvar y = date.getFullYear();\r\n\t\t\t\tvar m = date.getMonth() + 1;\r\n\t\t\t\tm = m < 10 ? '0' + m : m;\r\n\t\t\t\tvar d = date.getDate();\r\n\t\t\t\td = d < 10 ? '0' + d : d;\r\n\t\t\t\tvar h = date.getHours();\r\n\t\t\t\th = h < 10 ? '0' + h : h;\r\n\t\t\t\tvar minute = date.getMinutes();\r\n\t\t\t\tvar second = date.getSeconds();\r\n\t\t\t\tminute = minute < 10 ? '0' + minute : minute;\r\n\t\t\t\tsecond = second < 10 ? '0' + second : second;\r\n\r\n\t\t\t\tif (num == 0) {\r\n\t\t\t\t\treturn y + '年' + m + '月' + d + '日';\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn y + '年' + m + '月' + d + '日' + ' ' + h + ':' + minute + ':' + second;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t}\r\n\t};\r\n</script>\r\n<style>\r\n\t@import \"./certificateDetail.css\";\r\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1612253548177\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./tools.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Ficourt%2FDesktop%2Fmycode%2Funi%2Fpages%2Fevidence%2FcertificateDetail%2FcertificateDetail.vue&module=tools&lang=wxs\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./tools.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Ficourt%2FDesktop%2Fmycode%2Funi%2Fpages%2Fevidence%2FcertificateDetail%2FcertificateDetail.vue&module=tools&lang=wxs\"","export default function (Component) {\n       if(!Component.options.wxsCallMethods){\n         Component.options.wxsCallMethods = []\n       }\n       \n     }"],"sourceRoot":""}