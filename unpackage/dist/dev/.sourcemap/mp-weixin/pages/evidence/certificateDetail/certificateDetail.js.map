{"version":3,"sources":["uni-app:///main.js","webpack:////Users/icourt/Desktop/mycode/uni/pages/evidence/certificateDetail/certificateDetail.vue?bcdb","webpack:////Users/icourt/Desktop/mycode/uni/pages/evidence/certificateDetail/certificateDetail.vue?babf","webpack:////Users/icourt/Desktop/mycode/uni/pages/evidence/certificateDetail/certificateDetail.vue?984c","webpack:////Users/icourt/Desktop/mycode/uni/pages/evidence/certificateDetail/certificateDetail.vue?1789","uni-app:///pages/evidence/certificateDetail/certificateDetail.vue","webpack:////Users/icourt/Desktop/mycode/uni/pages/evidence/certificateDetail/certificateDetail.vue?8392","webpack:////Users/icourt/Desktop/mycode/uni/pages/evidence/certificateDetail/certificateDetail.vue?aff6","webpack:////Users/icourt/Desktop/mycode/uni/utils/tools.wxs?7673","webpack:////Users/icourt/Desktop/mycode/uni/utils/tools.wxs?daab"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,0I;AACAA,UAAU,CAACC,0BAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwU;AACxU;AACqE;AACL;AACa;;;AAG7E;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,uFAAM;AACR,EAAE,sSAAM;AACR,EAAE,+SAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0SAAU;AACZ;AACA;;AAEA;AACiO;AACjO,WAAW,2OAAM,iBAAiB,mPAAM;;AAExC;AACe,gF;;;;;;;;;;;;AC3Bf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,sNAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAA81B,CAAgB,+yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgGl3B;AACA;AACA;AACA;AACA;AACA,oB,CAAA;AACA;AACA;AACA,uBADA;AAEA,yBAFA;AAGA,yBAHA;AAIA,yBAJA;AAKA,mBALA,G;;;;AASA;AACA,MADA,kBACA;AACA;AACA,kBADA;AAEA;AACA,YAHA;AAIA;AACA,kBALA;AAMA;AACA,gCAPA;AAQA;AACA,iBATA;AAUA;AACA,mBAXA;AAYA;AACA,sBAbA;AAcA;AACA,mCAfA;AAgBA;AACA,qBAjBA;AAkBA;AACA,gBAnBA;AAoBA,oBApBA;AAqBA,kBArBA;AAsBA,wBAtBA;AAuBA,sBAvBA;AAwBA,6BAxBA;AAyBA,sBAzBA;;AA2BA,GA7BA;;AA+BA;AACA,gCADA,EA/BA;;AAkCA,WAlCA;AAmCA;AACA;AACA;AACA,oBADA;AAEA,wBAFA;;AAIA;;AAEA;AACA;AACA;AACA,GA9CA;;AAgDA,SAhDA,qBAgDA;AACA;AACA,qDADA;;AAGA,GApDA;;AAsDA;AACA,iBADA,yBACA,CADA,EACA;AACA;AACA;AACA;AACA,KALA;;AAOA,gBAPA,wBAOA,CAPA,EAOA;AACA;AACA;AACA;AACA,KAXA;;AAaA;AACA;AACA;AACA;AACA,oBADA;;AAGA;AACA;AACA;AACA,gBAFA;AAGA;AACA;AACA;AACA;AACA,+BADA;AAEA,sBAFA;AAGA,oCAHA;AAIA;;AAEA;AACA;AACA,WAXA,CAWA;;;AAGA,oCAdA,CAcA;;;AAGA;;AAEA;AACA;AACA;AACA,0BADA;;AAGA;AACA,uBADA;AAEA;AACA;AACA,eAJA;AAKA;AACA,kCADA,CACA;AACA,eAPA;;AASA;AACA,SArCA;AAsCA;AACA;AACA;AACA,SAzCA;;AA2CA,KA/DA;;AAiEA,uBAjEA,iCAiEA;AACA;AACA;AACA,4GADA;;AAGA,OAJA,MAIA;AACA;AACA;AACA,KAzEA;;AA2EA;AACA;AACA;AACA;AACA;AACA,mCADA;AAEA;AACA;AACA;AACA,8BADA;AAEA,4BAFA;;AAIA,oBAJA,oBAIA,GAJA,EAIA;AACA;AACA;AACA,+DADA;;AAGA,aATA;;;AAYA,SAhBA;;AAkBA,KAjGA;AAkGA;AACA;AACA;AACA,6CADA;;AAGA;AACA,yCADA;;AAGA,KA1GA;AA2GA;AACA;AACA;AACA;AACA;AACA;AACA,sEADA,CACA;;;AAGA;AACA,8CADA;AAEA,qCAFA;;AAIA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA;AACA,yBADA;AAEA,4BAFA;AAGA,yCAHA;;AAKA,SARA;AASA;AACA;AACA;AACA;AACA,kDADA;AAEA,yCAFA;;AAIA;AACA,SARA;AASA,OA7BA,EA6BA,GA7BA;AA8BA,KA9IA;AA+IA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KA/JA;AAgKA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8BADA;AAEA,wCAFA;;AAIA,OATA,EASA,IATA;AAUA,KA7KA;AA8KA;AACA;AACA,sBADA,CACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBADA;;AAGA,SAJA;AAKA,OARA,MAQA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA;;AAEA;AACA,SAPA;AAQA;AACA,KArMA;AAsMA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BADA;AAEA,wBAFA;;AAIA,SALA,EAKA,EALA;AAMA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBADA;AAEA;;AAEA;AACA,gBADA;AAEA;AACA;AACA,SAJA;AAKA;AACA;AACA;AACA,SARA;;AAUA,KArOA;;AAuOA;AACA,kBAxOA,0BAwOA,GAxOA,EAwOA,MAxOA,EAwOA;AACA;AACA;AACA,gBADA;AAEA;AACA;AACA;AACA;AACA,4BADA;;AAGA;AACA,SATA;AAUA;AACA;AACA;AACA,SAbA;AAcA,2CAdA;;AAgBA,KA1PA;;AA4PA,cA5PA,sBA4PA,QA5PA,EA4PA;AACA;AACA;AACA,0BADA;AAEA,uBAFA;AAGA,sBAHA;AAIA;AACA;AACA,SANA;AAOA;AACA;AACA,SATA;AAUA;AACA;AACA,SAZA;;AAcA,KA5QA;;AA8QA;;;AAGA,mBAjRA,6BAiRA;AACA;AACA,sCADA;AAEA,oBAFA;AAGA,sBAHA;;AAKA;AACA,oCADA;AAEA,sBAFA;AAGA;AACA;AACA,kCADA;;AAGA,SAPA;;AASA,KAhSA;;AAkSA;;;AAGA,oBArSA,4BAqSA,CArSA,EAqSA;AACA;AACA;AACA,+FADA;;AAGA,KA1SA;;AA4SA;;;AAGA,iBA/SA,2BA+SA;AACA;AACA,8BADA;;AAGA,KAnTA;;AAqTA;;;AAGA,mBAxTA,6BAwTA;AACA;AACA,+BADA;;AAGA;AACA,uEADA;;AAGA,KA/TA,EAtDA,E;;;;;;;;;;;;;AChHA;AAAA;AAAA;AAAA;AAAitC,CAAgB,4mCAAG,EAAC,C;;;;;;;;;;;ACAruC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA,wCAA6X,CAAgB,0bAAG,EAAC,C;;;;;;;;;;;;ACAjZ;AAAe;AACf;AACA;AACA;;AAEA,M","file":"pages/evidence/certificateDetail/certificateDetail.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/evidence/certificateDetail/certificateDetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./certificateDetail.vue?vue&type=template&id=c84ddffc&filter-modules=eyJ0b29scyI6eyJ0eXBlIjoic2NyaXB0IiwiY29udGVudCI6IiIsInN0YXJ0Ijo1MTIyLCJhdHRycyI6eyJtb2R1bGUiOiJ0b29scyIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi8uLi91dGlscy90b29scy53eHMifSwiZW5kIjo1MTIyfX0%3D&\"\nvar renderjs\nimport script from \"./certificateDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./certificateDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./certificateDetail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* custom blocks */\nimport block0 from \"../../../utils/tools.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Ficourt%2FDesktop%2Fmycode%2Funi%2Fpages%2Fevidence%2FcertificateDetail%2FcertificateDetail.vue&module=tools&lang=wxs\"\nif (typeof block0 === 'function') block0(component)\n\ncomponent.options.__file = \"pages/evidence/certificateDetail/certificateDetail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=template&id=c84ddffc&filter-modules=eyJ0b29scyI6eyJ0eXBlIjoic2NyaXB0IiwiY29udGVudCI6IiIsInN0YXJ0Ijo1MTIyLCJhdHRycyI6eyJtb2R1bGUiOiJ0b29scyIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi8uLi91dGlscy90b29scy53eHMifSwiZW5kIjo1MTIyfX0%3D&\"","var components = {\n  halfSlideItem: function() {\n    return import(\n      /* webpackChunkName: \"components/halfSlideItem/halfSlideItem\" */ \"@/components/halfSlideItem/halfSlideItem.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=script&lang=js&\"","<template>\r\n<view>\r\n<view class=\"certificate-detail-box\">\r\n \r\n  <view style=\"display:flex; justify-content:space-between\">\r\n        <view class=\"certificate-title\">存证名称</view>\r\n        <view style=\"display:flex; justify-content:flex-end;\">\r\n        <view :class=\"'certificate-detail-preview ' + ((dataList.status === 1 ?  '': 'failed' ))\" @tap=\"showSlideMenu\" v-if=\"type == 'sign'\">更多操作</view>\r\n         <view :class=\"'certificate-detail-preview ' + ((dataList.status === 1 ?  '': 'failed' ))\" @tap=\"previewCertificate\" v-if=\"type == 'data'\">查看证书</view>\r\n        </view>\r\n</view>\r\n  <view class=\"certificate-detail-items\">\r\n    <view class=\"certificate-detail-item\">\r\n      <view class=\"certificate-detail-item-name\">存证名称</view>\r\n      <view class=\"certificate-detail-item-value\">{{dataList.name || ''}}</view>\r\n    </view>\r\n    <view class=\"certificate-detail-item\">\r\n      <view class=\"certificate-detail-item-name\">存证类型</view>\r\n      <view class=\"certificate-detail-item-value\">{{dataList.fileType ==1 ? \"文本\" : dataList.fileType==2 ? \"图片\" : dataList.fileType == 3 ? \"语音\" : dataList.fileType == 4 ?\" 视频\": \"签署存证\"}}</view>\r\n    </view>\r\n    <view class=\"certificate-detail-item\">\r\n      <view class=\"certificate-detail-item-name\">存证渠道</view>\r\n      <view class=\"certificate-detail-item-value\">手机端</view>\r\n    </view>\r\n    <view class=\"certificate-detail-item\">\r\n      <view class=\"certificate-detail-item-name\">存证方式</view>\r\n      <view class=\"certificate-detail-item-value\">{{dataList.uploadMethod ==1 ? \"上传\":\"拍摄\"}}</view>\r\n    </view>\r\n    <view class=\"certificate-detail-item\">\r\n      <view class=\"certificate-detail-item-name\">存证时间</view>\r\n      <view class=\"certificate-detail-item-value\">{{tools.formatTime(dataList.gmtCreate,'Y-M-D h:m:s')}}</view>\r\n    </view>\r\n    <view class=\"certificate-detail-item\">\r\n      <view class=\"certificate-detail-item-name\">存证状态</view>\r\n      <view class=\"certificate-detail-item-value\">{{dataList.status ==0 ? \"出证中...\":dataList.status==1?\"出证成功\":\"出证失败\"}}</view>\r\n    </view>\r\n  </view>\r\n    <view class=\"certificate-title\">文件信息</view>\r\n    <view class=\"certificate-detail-file\">\r\n       <view v-if=\"dataList.fileType === 1\" class=\"certificate-detail-file-text\">{{textContext}}</view>\r\n      <image @tap.stop=\"checkImage\" mode=\"aspectFit\" v-if=\"dataList.fileType === 2\" class=\"certificate-detail-file-content-picture\" :data-src=\"dataList.filePath\" :src=\"dataList.filePath\"></image>\r\n       <view v-if=\"dataList.fileType === 3\" class=\"add-certificate-voice\">\r\n          <audio :src=\"dataList.filePath\" :name=\"dataList.name\" author id=\"myAudio\" @tap=\"handlePlayFun\" @ended=\"playToEndFun\" controls></audio>\r\n        </view>\r\n       <video @tap.stop=\"checkVideo\" v-if=\"dataList.fileType === 4\" id=\"videoBox\" class=\"certificate-detail-file-content-video\" :src=\"dataList.filePath\" @Error=\"videoError\"></video>\r\n       <view class=\"pdf-file\" v-if=\"dataList.fileType === 5\" @tap=\"handleViewDetailFun\">\r\n        <image src=\"https://shouyiner-prod.oss-cn-beijing.aliyuncs.com/wxapp/shanqian/certificate/file.png\" class=\"file-image\"></image>\r\n        <text>{{dataList.fileName}}</text>\r\n      </view>\r\n    </view>\r\n    <view style=\"display:flex; justify-content:space-between\">\r\n        <view class=\"certificate-title\">证书信息</view>\r\n       \r\n  </view>\r\n    <view class=\"certificate-detail-items\">\r\n    <view class=\"certificate-detail-item\">\r\n      <view class=\"certificate-detail-item-name\">存证hash</view>\r\n    </view>\r\n    <view class=\"certificate-detail-item\">\r\n      <view class=\"certificate-detail-item-value\">{{dataList.hash || ''}}</view>\r\n    </view>\r\n    </view>\r\n    <view style=\"height:20rpx; width=100%; background:#F7F8F9\"></view>\r\n    <view class=\"certificate-detail-items\">\r\n    <view class=\"certificate-detail-item\">\r\n      <view class=\"certificate-detail-item-name\">认证时间</view>\r\n      <view class=\"certificate-detail-item-value\">{{tools.formatTime(dataList.gmtModified,'Y-M-D h:m:s')}}</view>\r\n    </view>\r\n    <view class=\"certificate-detail-item\">\r\n      <view class=\"certificate-detail-item-name\">证书状态</view>\r\n      <view class=\"certificate-detail-item-value\">{{dataList.status ==0 ? \"出证中...\":dataList.status==1?\"出证成功\":\"出证失败\"}}</view>\r\n    </view>\r\n    </view>\r\n    <!-- 关联合同 -->\r\n     <view class=\"certificate-title\" v-if=\"type=='data' && contractList.length > 0\">关联合同</view>\r\n     <view class=\"certificate-detail-items\" v-if=\"type=='data'\">\r\n     <view v-for=\"(item, index) in contractList\" :key=\"index\" class=\"certificate-detail-item\">\r\n      <view class=\"certificate-detail-item-name undeContranct\" :data-contractid=\"item.id\" @tap=\"goContractDetail\">{{ item.contractTitle }}</view>\r\n    </view>\r\n    </view>\r\n     </view>\r\n\r\n<!-- 证据链菜单 -->\r\n<halfSlideItem :isShow=\"evidenceMenuShow\">\r\n\t<view class=\"slide-menu_list\">\r\n\t\t<view class=\"slide-menu_item\" @tap=\"previewCertificate\">查看证书</view>\r\n\t\t<view class=\"slide-menu_item\" @tap=\"goChainListPage\">查看证据链</view>\r\n\t</view>\r\n</halfSlideItem>\r\n  <!-- <view class='empty-data placeholder-color' wx:if=\"{{dataList.length <= 0}}\">暂无数据</view> -->\r\n</view>\r\n</template>\r\n\r\n<script module=\"tools\" lang=\"wxs\" src=\"../../../utils/tools.wxs\"></script>\r\n\r\n<script>\r\nlet api = require(\"../../../api/request.js\");\r\nlet utils = require(\"../../../utils/utils.js\");\r\nlet app = getApp();\r\nlet timer = null;\r\nlet innerAudioContext = uni.createInnerAudioContext();\r\nlet videoBox = null; // 存证类型icon的MAP\r\n// 存证类型icon的MAP\r\nlet iconMap = {\r\n  1: 'one-filetype-doc',\r\n  2: 'one-filetype-image',\r\n  3: 'one-filetype-music',\r\n  4: 'one-filetype-video',\r\n  5: 'one-contract'\r\n};\r\nimport halfSlideItem from \"../../../components/halfSlideItem/halfSlideItem\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      imageSrc: '',\r\n      // 图像src\r\n      id: '',\r\n      // 存证id，路由获取\r\n      dataList: {},\r\n      // 存证详情数据\r\n      icon: 'one-filetype-image',\r\n      // 存证类型icon\r\n      duration: 0,\r\n      //声音类型音频时长\r\n      isPlay: false,\r\n      // 声音是否播放\r\n      videoPlayTime: 0,\r\n      // 音频播放时间time\r\n      showVideoPlayTime: '00:00:00',\r\n      //音频播放显示时间\r\n      textContext: '',\r\n      // 文本内容\r\n      pdfUrl: '',\r\n      contractId: \"\",\r\n      type: 'sign',\r\n      audioContext: null,\r\n      contractList: [],\r\n      evidenceMenuShow: false,\r\n      durationShow: \"\"\r\n    };\r\n  },\r\n\r\n  components: {\r\n    halfSlideItem\r\n  },\r\n  props: {},\r\n  // 页面load加载数据\r\n  onLoad: function (options) {\r\n    this.setData({\r\n      id: options.id,\r\n      type: options.type\r\n    });\r\n    this.fetchRecords();\r\n\r\n    if (options.type == 'data') {\r\n      this.getContractList();\r\n    }\r\n  },\r\n\r\n  onReady() {\r\n    this.setData({\r\n      audioContext: uni.createAudioContext('myAudio')\r\n    });\r\n  },\r\n\r\n  methods: {\r\n    handlePlayFun(e) {\r\n      console.log(this.audioContext, this.audioContext._getAppStatus());\r\n      this.audioContext.play();\r\n      console.log(this.audioContext._getAppStatus());\r\n    },\r\n\r\n    playToEndFun(e) {\r\n      this.audioContext.pause();\r\n      this.audioContext.seek(0);\r\n      this.audioContext.pause();\r\n    },\r\n\r\n    // 获取存证详情\r\n    fetchRecords: function () {\r\n      var that = this;\r\n      uni.showLoading({\r\n        title: '加载中'\r\n      });\r\n      var url = api.evidence_detail + '?id=' + this.id;\r\n      api.sendGet({\r\n        // get请求\r\n        url: url,\r\n        success: res => {\r\n          uni.hideLoading();\r\n          let icon = iconMap[res.fileType];\r\n          that.setData({\r\n            dataList: res || {},\r\n            icon: icon,\r\n            contractId: res.filePath\r\n          }); // 存证类型为文件时（1为txt）\r\n\r\n          if (res.fileType === 1) {\r\n            that.openTxt();\r\n          } // 存证类型为图像 \r\n\r\n\r\n          if (res.fileType === 2) {} // 存证类型为音频（fileType为3）\r\n\r\n\r\n          if (res.fileType === 3) {}\r\n\r\n          if (res.fileType === 5) {\r\n            const url = api.get_certificate_address + \"/\" + this.dataList.id;\r\n            uni.showLoading({\r\n              title: '加载中'\r\n            });\r\n            api.sendGet({\r\n              url: url,\r\n              success: res => {\r\n                this.downloadPdfFun(res, 0);\r\n              },\r\n              fail: function (err) {\r\n                uni.hideLoading(); // utils.showError(err)\r\n              }\r\n            });\r\n          }\r\n        },\r\n        fail: err => {\r\n          uni.hideLoading();\r\n          utils.showError(err);\r\n        }\r\n      });\r\n    },\r\n\r\n    handleViewDetailFun() {\r\n      if (this.type == 'sign') {\r\n        uni.navigateTo({\r\n          url: `/pages/contract/sign/next/contractDetail/contractDetail?contractId=${this.contractId}`\r\n        });\r\n      } else {\r\n        this.previewCertificate();\r\n      }\r\n    },\r\n\r\n    // 打开txt文本函数 先downloadFile下载，再fs.readFile读取\r\n    openTxt: function () {\r\n      let that = this;\r\n      let fs = uni.getFileSystemManager();\r\n      uni.downloadFile({\r\n        url: this.dataList.filePath,\r\n        success: function (res) {\r\n          const filePath = res.tempFilePath;\r\n          fs.readFile({\r\n            filePath: filePath,\r\n            encoding: 'utf8',\r\n\r\n            complete(res) {\r\n              console.log(res.data);\r\n              that.setData({\r\n                textContext: JSON.parse(res.data).context || ''\r\n              });\r\n            }\r\n\r\n          });\r\n        }\r\n      });\r\n    },\r\n    // \r\n    checkImage: function (e) {\r\n      this.setData({\r\n        imageSrc: e.currentTarget.dataset.url\r\n      });\r\n      uni.navigateTo({\r\n        url: '?imageSrc=' + this.imageSrc\r\n      });\r\n    },\r\n    // 打开音频函数 试用innerAudioContext的api\r\n    setVoice: function () {\r\n      var that = this;\r\n      var url = this.dataList.filePath;\r\n      innerAudioContext.src = url || '';\r\n      setTimeout(function () {\r\n        var _durationShow = that.showTime(innerAudioContext.duration); // 播放时间显示\r\n\r\n\r\n        that.setData({\r\n          duration: innerAudioContext.duration,\r\n          durationShow: _durationShow\r\n        });\r\n        innerAudioContext.onError(res => {\r\n          console.log(res.errMsg);\r\n        });\r\n        innerAudioContext.onEnded(res => {\r\n          innerAudioContext.stop();\r\n          clearInterval(timer);\r\n          that.setData({\r\n            isPlay: false,\r\n            videoPlayTime: 0,\r\n            showVideoPlayTime: '00:00:00'\r\n          });\r\n        });\r\n        innerAudioContext.onTimeUpdate(res => {\r\n          if (innerAudioContext.duration && !that.duration) {\r\n            _durationShow = that.showTime(innerAudioContext.duration);\r\n            that.setData({\r\n              duration: innerAudioContext.duration,\r\n              durationShow: _durationShow\r\n            });\r\n          }\r\n        });\r\n      }, 200);\r\n    },\r\n    // 音频显示函数\r\n    showTime: function (time) {\r\n      function formatShow(value) {\r\n        return value < 10 ? '0' + value : value;\r\n      }\r\n\r\n      var sec = parseInt(time % 60);\r\n\r\n      var _min = parseInt(time / 60);\r\n\r\n      var min = parseInt(_min % 24);\r\n      var hour = parseInt(_min / 24);\r\n      hour = formatShow(hour);\r\n      min = formatShow(min);\r\n      sec = formatShow(sec);\r\n      return hour + ':' + min + ':' + sec;\r\n    },\r\n    // 设置定时函数 显示播放时间\r\n    setTime: function () {\r\n      var that = this;\r\n      timer = setInterval(function () {\r\n        let _time = that.videoPlayTime + 1;\r\n\r\n        var _formatTime = that.showTime(_time);\r\n\r\n        that.setData({\r\n          videoPlayTime: _time,\r\n          showVideoPlayTime: _formatTime\r\n        });\r\n      }, 1000);\r\n    },\r\n    //播放声音函数\r\n    playVoice: function () {\r\n      var that = this; // if (!this.data.duration) return\r\n\r\n      if (this.isPlay) {\r\n        innerAudioContext.pause();\r\n        clearInterval(timer);\r\n        innerAudioContext.onPause(() => {\r\n          that.setData({\r\n            isPlay: false\r\n          });\r\n        });\r\n      } else {\r\n        innerAudioContext.play();\r\n        innerAudioContext.onPlay(() => {\r\n          clearInterval(timer);\r\n          that.setData({\r\n            isPlay: true\r\n          }); // 设置定时函数同步显示时间\r\n\r\n          this.setTime();\r\n        });\r\n      }\r\n    },\r\n    // 预览下载\r\n    previewCertificate: function (e) {\r\n      var that = this;\r\n\r\n      if (this.dataList.status !== 1) {\r\n        setTimeout(() => {\r\n          uni.showToast({\r\n            title: '出证中，请稍后再试',\r\n            icon: 'none'\r\n          });\r\n        }, 50);\r\n        return;\r\n      }\r\n\r\n      var hash = this.dataList.hash;\r\n      if (!hash) return;\r\n      var url = api.get_certificate_address + \"/\" + this.dataList.id;\r\n      uni.showLoading({\r\n        title: '加载中'\r\n      }); // 下载成功 打开pdf\r\n\r\n      api.sendGet({\r\n        url: url,\r\n        success: function (res) {\r\n          that.downloadPdfFun(res, 1);\r\n        },\r\n        fail: function (err) {\r\n          uni.hideLoading();\r\n          utils.showError(err);\r\n        }\r\n      });\r\n    },\r\n\r\n    // 打开pdf文件\r\n    downloadPdfFun(url, status) {\r\n      console.log(url);\r\n      uni.downloadFile({\r\n        url: url,\r\n        success: res => {\r\n          uni.hideLoading();\r\n          const filePath = res.tempFilePath;\r\n          this.setData({\r\n            pdfUrl: filePath\r\n          });\r\n          if (status) this.openPdfFun(filePath);\r\n        },\r\n        fail: function (res) {\r\n          uni.hideLoading();\r\n          console.log(res);\r\n        },\r\n        complete: function (res) {}\r\n      });\r\n    },\r\n\r\n    openPdfFun(filePath) {\r\n      console.log(filePath);\r\n      uni.openDocument({\r\n        filePath: filePath,\r\n        fileType: 'pdf',\r\n        showMenu: true,\r\n        success: res => {\r\n          console.log(res, 'success');\r\n        },\r\n        fail: err => {\r\n          console.log(err, 'fail');\r\n        },\r\n        complete: () => {\r\n          console.log('complete');\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * @desc 获取关联合同\r\n     */\r\n    getContractList() {\r\n      const params = {\r\n        certificateEvidenceId: this.id,\r\n        pageIndex: 0,\r\n        pageSize: 1000\r\n      };\r\n      api.sendGet({\r\n        url: api.findContractSubject,\r\n        params: params,\r\n        success: res => {\r\n          this.setData({\r\n            contractList: res.data\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * @desc 跳转合同详情\r\n     */\r\n    goContractDetail(e) {\r\n      const contractId = e.currentTarget.dataset.contractid;\r\n      uni.navigateTo({\r\n        url: \"/pages/contract/sign/next/contractDetail/contractDetail?contractId=\" + contractId\r\n      });\r\n    },\r\n\r\n    /**\r\n     * @desc 更多操作\r\n     */\r\n    showSlideMenu() {\r\n      this.setData({\r\n        evidenceMenuShow: true\r\n      });\r\n    },\r\n\r\n    /**\r\n     * @desc 查看证据链\r\n     */\r\n    goChainListPage() {\r\n      this.setData({\r\n        evidenceMenuShow: false\r\n      });\r\n      uni.navigateTo({\r\n        url: \"/pages/contract/contractList/chains/chains?id=\" + this.id\r\n      });\r\n    }\r\n\r\n  }\r\n};\r\n</script>\r\n<style>\r\n@import \"./certificateDetail.css\";\r\n</style>","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1608800511820\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./tools.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Ficourt%2FDesktop%2Fmycode%2Funi%2Fpages%2Fevidence%2FcertificateDetail%2FcertificateDetail.vue&module=tools&lang=wxs\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./tools.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Ficourt%2FDesktop%2Fmycode%2Funi%2Fpages%2Fevidence%2FcertificateDetail%2FcertificateDetail.vue&module=tools&lang=wxs\"","export default function (Component) {\n       if(!Component.options.wxsCallMethods){\n         Component.options.wxsCallMethods = []\n       }\n       \n     }"],"sourceRoot":""}