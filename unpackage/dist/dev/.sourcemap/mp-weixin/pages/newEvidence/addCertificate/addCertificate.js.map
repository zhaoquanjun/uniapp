{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/icourt/Desktop/mycode/uni/pages/newEvidence/addCertificate/addCertificate.vue?8e8b","webpack:////Users/icourt/Desktop/mycode/uni/pages/newEvidence/addCertificate/addCertificate.vue?3614","webpack:////Users/icourt/Desktop/mycode/uni/pages/newEvidence/addCertificate/addCertificate.vue?0770","uni-app:///pages/newEvidence/addCertificate/addCertificate.vue","webpack:////Users/icourt/Desktop/mycode/uni/pages/newEvidence/addCertificate/addCertificate.vue?6ae1","webpack:////Users/icourt/Desktop/mycode/uni/pages/newEvidence/addCertificate/addCertificate.vue?5cad","webpack:////Users/icourt/Desktop/mycode/uni/utils/tools.wxs?7a28","webpack:////Users/icourt/Desktop/mycode/uni/utils/tools.wxs?f052"],"names":["createPage","Page"],"mappings":"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AoIA;AACA;AACA;AACA,2BADA;;AAGA,KAzIA;;AA2IA;AACA,gBA5IA,0BA4IA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BADA;;AAGA;AACA,OALA,MAKA;AACA;AACA,yBADA;;AAGA;AACA;AACA,KA5JA;;AA8JA;AACA;AACA;AACA;AACA,uBADA;AAEA,yBAFA;AAGA;AACA,2BAJA;AAKA;AACA,4BANA;AAOA;AACA,qBARA;AASA;AACA,qBAVA,CAUA;AAVA;AAYA;;AAEA;AACA;AACA;AACA;AACA,OAFA,EAlBA,CAoBA;;AAEA;AACA;AACA,OAFA;AAGA,KAxLA;AAyLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAFA;;AAIA,oBAJA;;;AAOA,WAPA,CAIA,YAJA,CAKA,QALA,GAOA,GAPA,CAKA,QALA,CAMA,QANA,GAOA,GAPA,CAMA,QANA;AAQA;AACA;AACA;AACA,uDADA;AAEA,gCAFA;AAGA,uBAHA;AAIA,mFAJA;;AAMA;AACA,2CADA;AAEA,8BAFA;AAGA,4BAHA;AAIA,+DAJA;AAKA,wBALA;;AAOA;AACA;AACA;AACA;AACA,SAHA;AAIA;AACA;AACA;AACA,yBADA;AAEA,4BAFA;AAGA,yCAHA;;AAKA;AACA,SARA;AASA;AACA,SADA;AAEA,OAvCA;AAwCA,KAtOA;AAuOA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBADA;AAEA,gDAFA;;AAIA,OAhBA,EAgBA,IAhBA;;AAkBA;AACA;AACA;AACA,KA/PA;AAgQA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAhRA;AAiRA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA,yDAFA;;AAIA,OAhBA,EAgBA,IAhBA;;AAkBA;AACA;AACA;AACA,KAzSA;AA0SA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBADA;;AAGA,SANA;AAOA,OATA,MASA;AACA,iCADA,CACA;;AAEA;AACA;AACA;AACA;AACA,wBADA;;AAGA;AACA,SAPA;AAQA;AACA,KApUA;;AAsUA;AACA,iBAvUA,yBAuUA,GAvUA,EAuUA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAlVA;;AAoVA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,eAFA;AAGA,mBAHA;AAIA,wBAJA;AAKA,mBALA;AAMA,qBANA;AAOA,wBAPA;AAQA,qCARA;AASA,oCATA;;AAWA;AACA,KApWA;AAqWA;AACA;AACA;AACA;AACA,sCAHA,CAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,qEADA;AAEA;AACA;AACA,wBADA;;AAGA;AACA,yBADA;AAEA;AACA,8BAHA;AAIA;AACA,uBALA;AAMA;AACA,wBAPA;AAQA;AACA,sDADA;AAEA,kCAFA;AAGA,4CAHA;AAIA,wCAJA;AAKA,4CALA,EARA;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA,0EADA;AAEA,yDAFA;AAGA,uCAHA;AAIA,uCAJA;AAKA,2CALA;AAMA,mDANA;AAOA,kCAPA;;AASA;;AAEA;AACA;AACA,eAFA,MAEA;AACA;AACA,+CADA;AAEA;AACA,oCAHA;AAIA;AACA,6BALA;AAMA;AACA,0CAPA;AAQA;AACA;AACA;AACA;AACA;AACA,mCADA;AAEA,iCAFA;AAGA,uCAHA;AAIA;AACA;AACA;AACA;AACA;AACA,uBATA;;AAWA,mBAvBA;AAwBA;AACA;AACA;AACA,mCADA;AAEA,iCAFA;AAGA,sCAHA;AAIA,yCAJA;AAKA;AACA;AACA;AACA,yBAFA,MAEA;AACA;AACA;AACA,uBAXA;;AAaA,mBAvCA;;AAyCA;AACA,aA5EA;AA6EA;AACA;AACA,aA/EA;;AAiFA,SAvFA;AAwFA;AACA;AACA;AACA;AACA,wBADA;;AAGA,WAJA,EAIA,EAJA;AAKA,SA/FA;;AAiGA,KA3dA;;AA6dA,mBA7dA,6BA6dA;AACA;AACA;AACA;AACA,oCADA;;AAGA,KAneA;;AAqeA;AACA;AACA;AACA;;AAEA;AACA;AACA,2BADA;;AAGA,OAJA,MAIA;AACA;AACA,4BADA;;AAGA;AACA,KAnfA;;AAqfA;;;AAGA,aAxfA,qBAwfA,MAxfA,EAwfA;AACA;AACA,6MADA;AAEA;AACA;AACA,SAJA;;AAMA,YANA,gBAMA,GANA,EAMA;AACA;AACA;AACA,wBADA;;AAGA,WAJA,EAIA,EAJA;AAKA,SAZA;;;AAeA,KAxgBA,EArEA,E;;;;;;;;;;;;;AC1IA;AAAA;AAAA;AAAA;AAA8sC,CAAgB,ymCAAG,EAAC,C;;;;;;;;;;;ACAluC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA,wCAA0X,CAAgB,ubAAG,EAAC,C;;;;;;;;;;;;ACA9Y;AAAe;AACf;AACA;AACA;;AAEA,M","file":"pages/newEvidence/addCertificate/addCertificate.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/newEvidence/addCertificate/addCertificate.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./addCertificate.vue?vue&type=template&id=08b480e4&filter-modules=eyJ0b29scyI6eyJ0eXBlIjoic2NyaXB0IiwiY29udGVudCI6IiIsInN0YXJ0Ijo0MjY2LCJhdHRycyI6eyJtb2R1bGUiOiJ0b29scyIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi8uLi91dGlscy90b29scy53eHMifSwiZW5kIjo0MjY2fX0%3D&\"\nvar renderjs\nimport script from \"./addCertificate.vue?vue&type=script&lang=js&\"\nexport * from \"./addCertificate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addCertificate.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* custom blocks */\nimport block0 from \"../../../utils/tools.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Ficourt%2FDesktop%2Fmycode%2Funi%2Fpages%2FnewEvidence%2FaddCertificate%2FaddCertificate.vue&module=tools&lang=wxs\"\nif (typeof block0 === 'function') block0(component)\n\ncomponent.options.__file = \"pages/newEvidence/addCertificate/addCertificate.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addCertificate.vue?vue&type=template&id=08b480e4&filter-modules=eyJ0b29scyI6eyJ0eXBlIjoic2NyaXB0IiwiY29udGVudCI6IiIsInN0YXJ0Ijo0MjY2LCJhdHRycyI6eyJtb2R1bGUiOiJ0b29scyIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi8uLi91dGlscy90b29scy53eHMifSwiZW5kIjo0MjY2fX0%3D&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addCertificate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addCertificate.vue?vue&type=script&lang=js&\"","<template>\r\n<view>\r\n<!-- 添加存证页面 start -->\n<view class=\"add-certificate-box\" v-if=\"!isVoiceRecord\">\n\t<form catchsubmit=\"addCertificateSubmit\">\n\t\t<view class=\"certificate-content-item\">\n\t\t\t<!-- 上传图片 start -->\n\t\t\t<view class=\"certificate-content-item--image\" v-if=\"type==='image'\">\n\t\t\t\t<view class=\"h1\">上传图片</view>\n\t\t\t\t<view class=\"add-certificate-image\">\n\t\t\t\t\t<view class=\"add-certificate-image--item\">\n\t\t\t\t\t\t<image class=\"image-add\" mode=\"aspectFit\" :src=\"addCertificateImageUrl || 'https://shouyiner-prod.oss-cn-beijing.aliyuncs.com/wxapp/shanqian/certificate/add.png'\" @tap.stop=\"tapAddImage\"></image>\n\t\t\t\t\t\t<view v-if=\"addCertificateImageUrl\" class=\"image-delete one-close\" :data-index=\"index\" @tap.stop=\"tapDeleteImage\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<!-- 上传图片 end -->\n\n\t\t\t<!-- 上传音频 start -->\n\t\t\t<view class=\"certificate-content-item--voice\" v-if=\"type==='voice'\">\n\t\t\t\t<view class=\"h1\">{{addCertificateVoice ?'语音文件' : '上传语音'}} </view>\n\t\t\t\t<view @tap.stop=\"openVoiceRecord\" v-if=\"!addCertificateVoice\" class=\"input-name\">录制语音\n\t\t\t\t\t<view class=\"icon-right one-arrow-right\"></view>\n\t\t\t\t</view>\n\t\t\t\t<view v-if=\"addCertificateVoice\" class=\"add-certificate-voice\">\n\t\t\t\t\t<view class=\"add-certificate-voice-progress\">\n\t\t\t\t\t\t<view :class=\"'add-certificate-voice-progress--btn ' + (isPlay ? 'one-stop-round' : 'one-start-round' )\" @tap.stop=\"playVoice\"></view>\n\t\t\t\t\t\t<text class=\"add-certificate-voice-progress--start\">{{showVideoPlayTime}}</text>\n\t\t\t\t\t\t<view class=\"add-certificate-voice-progress--loading\">\n\t\t\t\t\t\t\t<view class=\"add-certificate-voice-progress--width\" :style=\"'width:' + ((videoPlayTime * 100000 / duration) + '%')\"></view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<text class=\"add-certificate-voice-progress--end\">{{showDurationTime}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"size\">音频大小：{{addFileInfo.size}}<text v-if=\"addFileInfo.size\">M</text></view>\n\t\t\t\t\t<view class=\"add-certificate-voice-delete one-close\" @tap.stop=\"tapDeleteVoice\"></view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<!-- 上传音频 end -->\n\n\t\t\t<!-- 上传文件 start -->\n\t\t\t<view class=\"certificate-content-item--file\" v-if=\"type==='file'\">\n\t\t\t\t<view class=\"h1\" style=\"margin-top:32rpx\">选择文件</view>\n\t\t\t\t<view class=\"file-size\">文件大小：{{addFileInfo.size}}<text v-if=\"addFileInfo.size\">M</text></view>\n\t\t\t\t<view class=\"upload-btn\" @tap=\"handleChooseFileFun\">选择上传文件</view>\n\t\t\t</view>\n\t\t\t<!-- 上传文字 start -->\n\n\t\t</view>\n\t\t<!-- 命名文件 start -->\n\t\t<view class=\"certificate-content-item\">\n\t\t\t<view class=\"h1\">命名文件</view>\n\t\t\t<input class=\"input-name\" :value=\"nameValue\" @input=\"nameInput\" name=\"name\" maxLength=\"20\" placeholder=\"最多20个字符，命名不能出现字符有：/：*？#”<>|。\"></input>\n\t\t</view>\n\t\t<!-- 命名文件 end -->\n\t\t<!-- 存证类型 start -->\n\t\t<view class=\"certificate-content-item\">\n\t\t\t<view class=\"h1\">存证类型</view>\n\t\t\t<view class=\"sign-certificate-type\">\n\t\t\t\t<radio-group name=\"type\">\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<radio value=\"2\" checked></radio>\n\t\t\t\t\t\t<text class=\"label-text\">司法存证</text>\n\t\t\t\t\t\t<view class=\"label-detail\">安全可信存证、国家授权时间、数据直连司法、司法效力</view>\n\t\t\t\t\t</label>\n\t\t\t\t</radio-group>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- 存证类型 end -->\n\t\t<!-- 说明 start -->\n\t\t<view class=\"certificate-content-item\">\n\t\t\t<view class=\"add-certificate-description\">\n\t\t\t\t<view class=\"title\"> 说明</view>\n\t\t\t\t<view> 1. 一次仅支持上传一个文件；</view>\n\t\t\t\t<view> 2. 所选文件将按照国密SM3算法计算Hash；</view>\n\t\t\t\t<view> 3. 链上不存储原文件，仅存储Hash。</view>\n\t\t\t\t<view v-if=\"type==='file'\"> 4. 建议上传文件大小不超过1G。</view>\n\t\t\t\t<view v-if=\"type==='voice'\"> 4. 建议上传音频时长不超过两个小时，录制时长最长支持十分钟。</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- 说明 end -->\n\t\t<!-- 提交按钮 -->\n\t\t<button class=\"certificate-submit\" :style=\"'background:' + (ishighLight ? '#464646' : '#B7B7B7')\" form-type=\"submit\">{{ formId ? '保存' : '立即出证' }}</button>\n\t</form>\n</view>\n<!-- 添加存证页面 end -->\n\n<!-- 声音录制页面 start -->\n<view class=\"voice-record-box\" v-if=\"type==='voice' && isVoiceRecord\">\n\t<view class=\"voice-record-content\">\n\t\t<view class=\"voice-record-time\">{{showTime||'00:00:00'}}</view>\n\t\t<view class=\"voice-record-time-text\">{{time ? '正在录音… 点击按钮暂停录音自动保存':'点击按钮开始录音'}}</view>\n\t\t<view :class=\"' ' + (recording? 'voice-record-btn voice-record-btn-loading':'voice-record-btn')\">\n\t\t\t<view class=\"voice-record-btn-center\" @tap.stop=\"longPressBtn\"></view>\n\t\t</view>\n\t</view>\n</view>\n<!-- 声音录制页面 end -->\r\n</view>\r\n</template>\r\n\r\n<script module=\"tools\" lang=\"wxs\" src=\"../../../utils/tools.wxs\"></script>\r\n\r\n<script>\r\nlet api = require(\"../../../api/request.js\");\r\nlet utils = require(\"../../../utils/utils.js\");\r\nconst recorderManager = uni.getRecorderManager();\r\nconst innerAudioContext = uni.createInnerAudioContext();\r\nlet timer = null;\r\nconst titleMap = {\n  text: {\n    title: '文字存证',\n    value: 1\n  },\n  image: {\n    title: '图片存证',\n    value: 2\n  },\n  voice: {\n    title: '语音存证',\n    value: 3\n  },\n  video: {\n    title: '视频存证',\n    value: 4\n  },\n  file: {\n    title: '文件存证',\n    value: 5\n  }\n}; // 类型map\r\n// 类型map\nconst typeMap = {\n  image: 'addCertificateImageUrl',\n  video: 'addCertificateVideo',\n  voice: 'addCertificateVoice',\n  file: 'addCertificateFile'\n};\r\n\r\nexport default {\n  data() {\n    return {\n      ishighLight: false,\n      //\n      type: '',\n      //页面存证\n      fileType: '',\n      // 文件类型\n      nameValue: '',\n      // 存证名称\n      typeValue: 2,\n      //存证类型\n      addCertificateImageUrl: '',\n      // 图片存证url\n      addCertificateText: '',\n      // 文字存证文本\n      addCertificateVoice: '',\n      // 语音存证url\n      addCertificateVideo: '',\n      //视频存证url\n      addCertificateFile: '',\n      //新增文件url\n      isVoiceRecord: false,\n      // 是否是录制音频页面\n      time: 0,\n      // 录音时长\n      showTime: 0,\n      //录制音频的显示时间\n      recording: false,\n      // 音频是否正在录制\n      duration: 0,\n      // 音频录制时长\n      isPlay: false,\n      // 音频是否在播放\n      videoPlayTime: 0,\n      // 音频播放时间 number\n      showVideoPlayTime: '00:00:00',\n      // 音频播放显示时间\n      showDurationTime: '00:00:00',\n      // 音频总时长显示\n      isLoading: false,\n      // loading\n      uploadMethod: 2,\n      //上传方式\n      addFileInfo: null,\n      formId: null // 添加数据链的id,如果存证，则是添加数据链\n\n    };\n  },\n\n  components: {},\n  props: {},\n  //页面加载函数\n  onLoad: function (options) {\n    let type = options.type;\n    let formId = options.fromId;\n    this.setData({\n      type: type,\n      fileType: titleMap[type].value,\n      formId: formId\n    });\n    uni.setNavigationBarTitle({\n      title: titleMap[type].title\n    });\n  },\n\n  onReady() {},\n\n  methods: {\n    // 名称输入函数\n    nameInput: function (event) {\n      let value = event.detail.value;\n      this.setData({\n        nameValue: value\n      });\n      this.getHighLight();\n    },\n    //添加图片\n    tapAddImage: function () {\n      let that = this;\n      uni.showActionSheet({\n        itemList: ['拍照', '从相册选择'],\n        success: function (res) {\n          console.log(res.tapIndex); // if(this)\n\n          that.chooseImage(res.tapIndex == 0 ? 'camera' : 'album');\n\n          if (res.tapIndex == 0) {\n            that.setData({\n              uploadMethod: 2\n            });\n          } else {\n            that.setData({\n              uploadMethod: 1\n            });\n          }\n        }\n      });\n    },\n\n    /**\n     * 选择图片\n     * sourceType camera album\n     */\n    chooseImage: function (sourceType) {\n      let that = this;\n      uni.chooseImage({\n        count: 1,\n        sizeType: 'compressed',\n        maxDuration: 10,\n        sourceType: [sourceType],\n        success: res => {\n          const nameArr = res.tempFiles[0].path.slice(res.tempFiles[0].path.lastIndexOf('/') + 1).split('.');\n          const nameStr = this.random_string() + '.' + nameArr[nameArr.length - 1];\n          console.log(nameArr);\n          let o = {\n            size: (res.tempFiles[0].size / 1024 / 1000).toFixed(2),\n            path: res.tempFiles[0].path,\n            name: nameStr,\n            originName: res.tempFiles[0].path.slice(res.tempFiles[0].path.lastIndexOf('/') + 1)\n          };\n          this.setData({\n            addFileInfo: o\n          });\n          let tempFilePaths = res.tempFilePaths;\n          that.setData({\n            addCertificateImageUrl: tempFilePaths[0]\n          });\n          that.getHighLight();\n        }\n      });\n    },\n    //删除图片\n    tapDeleteImage: function (e) {\n      let that = this;\n      that.setData({\n        addCertificateImageUrl: ''\n      });\n      that.getHighLight();\n    },\n\n    // 校验文件是否支持上传\n    checkAllowUploadFun(fileName) {\n      const allowFileTypes = ['.doc', '.docx', '.pdf', '.bpm'];\n      let flag = false;\n      allowFileTypes.map(it => {\n        if (fileName.indexOf(it) > -1) {\n          flag = true;\n        }\n      });\n      return flag;\n    },\n\n    // 选择文件\n    handleChooseFileFun() {\n      uni.chooseMessageFile({\n        count: 1,\n        type: 'file',\n        success: res => {\n          console.log(res);\n          const nameArr = res.tempFiles[0].path.slice(res.tempFiles[0].path.lastIndexOf('/') + 1).split('.');\n          const nameStr = this.random_string() + '.' + nameArr[nameArr.length - 1];\n          let o = {\n            size: (res.tempFiles[0].size / 1024 / 1000).toFixed(2),\n            path: res.tempFiles[0].path,\n            name: nameStr,\n            originName: res.tempFiles[0].path.slice(res.tempFiles[0].path.lastIndexOf('/') + 1)\n          };\n          this.setData({\n            addFileInfo: o\n          });\n\n          if (this.checkAllowUploadFun(res.tempFiles[0].name)) {\n            this.setData({\n              addCertificateFile: res.tempFiles[0].path\n            });\n            this.getHighLight();\n          } else {\n            setTimeout(() => {\n              uni.showToast({\n                title: '文件格式必须为pdf、doc、docx或者bpm',\n                icon: \"none\",\n                duration: 2000,\n                mask: true\n              });\n            }, 50);\n          }\n        },\n\n        fail(err) {\n          setTimeout(() => {\n            uni.showToast({\n              title: err\n            });\n          }, 50);\n        }\n\n      });\n    },\n\n    //打开声音录制页面\n    openVoiceRecord: function () {\n      this.setData({\n        isVoiceRecord: true\n      });\n    },\n\n    // 点击录音 、点击录音保存\n    longPressBtn() {\n      let that = this;\n      console.log(123123123);\n      clearInterval(timer);\n\n      if (that.recording) {\n        that.setData({\n          recording: false\n        });\n        that.stop();\n      } else {\n        that.setData({\n          recording: true\n        });\n        that.start();\n      }\n    },\n\n    //开始录音\n    start: function () {\n      var that = this;\n      const options = {\n        duration: 60000,\n        sampleRate: 16000,\n        //采样率\n        numberOfChannels: 1,\n        //录音通道数\n        encodeBitRate: 96000,\n        //编码码率\n        format: 'mp3',\n        //音频格式，有效值 aac/mp3\n        frameSize: 50 //指定帧大小，单位 KB\n\n      }; //开始录音\n\n      that.openInterval();\n      recorderManager.start(options);\n      recorderManager.onStart(function () {\n        console.log('recorder start');\n      }); //错误回调\n\n      recorderManager.onError(res => {\n        console.log(res);\n      });\n    },\n    //停止录音\n    stop: function () {\n      var that = this;\n      clearInterval(timer);\n      recorderManager.stop();\n      recorderManager.onStop(res => {\n        that.tempFilePath = res.tempFilePath;\n        console.log('停止录音', res);\n        const {\n          tempFilePath,\n          duration,\n          fileSize\n        } = res;\n        const nameArr = res.tempFilePath.slice(res.tempFilePath.lastIndexOf('/') + 1).split('.');\n        const nameStr = this.random_string() + '.' + nameArr[nameArr.length - 1];\n        let o = {\n          size: (res.fileSize / 1024 / 1000).toFixed(2),\n          path: res.tempFilePath,\n          name: nameStr,\n          originName: res.tempFilePath.slice(res.tempFilePath.lastIndexOf('/') + 1)\n        };\n        this.setData({\n          addCertificateVoice: tempFilePath,\n          isVoiceRecord: false,\n          duration: duration,\n          showDurationTime: this.showTimeFun(duration / 1000),\n          addFileInfo: o\n        });\n        innerAudioContext.src = tempFilePath;\n        innerAudioContext.onError(res => {\n          console.log(res.errMsg);\n          console.log(res.errCode);\n        });\n        innerAudioContext.onEnded(res => {\n          innerAudioContext.stop();\n          that.setData({\n            isPlay: false,\n            videoPlayTime: 0,\n            showVideoPlayTime: '00:00:00'\n          });\n          clearInterval(timer);\n        });\n        innerAudioContext.onTimeUpdate(() => {// console.log(innerAudioContext)\n        });\n      });\n    },\n    // 设置循环显示播放时长\n    openInterval: function () {\n      var that = this;\n      timer = setInterval(function () {\n        let _time = that.time + 1;\n\n        var sec = parseInt(_time % 60);\n\n        var _min = parseInt(_time / 60);\n\n        var min = parseInt(_min % 24);\n        var hour = parseInt(_min / 24);\n        hour = formatShow(hour);\n        min = formatShow(min);\n        sec = formatShow(sec);\n        that.setData({\n          time: _time,\n          showTime: hour + ':' + min + ':' + sec\n        });\n      }, 1000);\n\n      function formatShow(value) {\n        return value < 10 ? '0' + value : value;\n      }\n    },\n    // 格式化时间 00:00:00\n    showTimeFun: function (time) {\n      function formatShow(value) {\n        return value < 10 ? '0' + value : value;\n      }\n\n      var sec = parseInt(time % 60);\n\n      var _min = parseInt(time / 60);\n\n      var min = parseInt(_min % 24);\n      var hour = parseInt(_min / 24);\n      hour = formatShow(hour);\n      min = formatShow(min);\n      sec = formatShow(sec);\n      return hour + ':' + min + ':' + sec;\n    },\n    // 设置音频显示时间\n    setTime: function () {\n      var that = this;\n      timer = setInterval(function () {\n        let _time = that.videoPlayTime + 1;\n\n        var sec = parseInt(_time % 60);\n\n        var _min = parseInt(_time / 60);\n\n        var min = parseInt(_min % 24);\n        var hour = parseInt(_min / 24);\n        hour = formatShow(hour);\n        min = formatShow(min);\n        sec = formatShow(sec);\n        that.setData({\n          videoPlayTime: _time,\n          showVideoPlayTime: hour + ':' + min + ':' + sec\n        });\n      }, 1000);\n\n      function formatShow(value) {\n        return value < 10 ? '0' + value : value;\n      }\n    },\n    //播放声音\n    playVoice: function () {\n      var that = this;\n      console.log(this.isPlay, innerAudioContext);\n\n      if (this.isPlay) {\n        innerAudioContext.pause();\n        innerAudioContext.onPause(() => {\n          console.log('暂停播放');\n          clearInterval(timer);\n          that.setData({\n            isPlay: false\n          });\n        });\n      } else {\n        innerAudioContext.play(); // this.setTime()\n\n        innerAudioContext.onPlay(() => {\n          console.log('开始播放');\n          clearInterval(timer);\n          that.setData({\n            isPlay: true\n          });\n          this.setTime();\n        });\n      }\n    },\n\n    // 获取随机串\n    random_string(len) {\n      len = len || 32;\n      var chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';\n      var maxPos = chars.length;\n      var pwd = '';\n\n      for (let i = 0; i < len; i++) {\n        pwd += chars.charAt(Math.floor(Math.random() * maxPos));\n      }\n\n      return pwd;\n    },\n\n    // 删除录制声音\n    tapDeleteVoice: function () {\n      innerAudioContext.stop();\n      innerAudioContext.destroy();\n      this.setData({\n        addCertificateVoice: '',\n        time: 0,\n        showTime: 0,\n        recording: false,\n        duration: 0,\n        isPlay: false,\n        videoPlayTime: 0,\n        showVideoPlayTime: '00:00:00',\n        showDurationTime: '00:00:00'\n      });\n      this.getHighLight();\n    },\n    //提交按钮\n    addCertificateSubmit: function (event) {\n      let that = this;\n      if (that.isLoading) return;\n      let values = event.detail.value; //验证\n\n      let typeMapName = typeMap[this.type];\n\n      if (!utils.trim(values.name) || !values.type || !utils.trim(this[typeMapName])) {\n        utils.showError('请完善信息后再上传');\n        return;\n      }\n\n      var reg = /[/：\\*\\？#”<>|。]/;\n\n      if (reg.test(values.name)) {\n        utils.showError('含有特殊字符，请输入正确文件名称后再上传');\n        return;\n      }\n\n      let filePath = this[typeMapName] || '';\n      api.sendGet({\n        url: api.get_upload_policy + '?ossPrefixKey=' + \"blockchain/\",\n        success: res => {\n          uni.showLoading({\n            title: '上传中'\n          });\n          api.uploadFile({\n            url: res.host,\n            //url\n            filePath: filePath,\n            // filePath\n            key: 'file',\n            //filename\n            name: 'file',\n            formData: {\n              'key': res.dir + this.addFileInfo.name,\n              'policy': res.policy,\n              'OSSAccessKeyId': res.accessid,\n              'signature': res.signature,\n              'success_action_status': '200'\n            },\n            // formDate\n            success: () => {\n              // success\n              let certificateType = values.type;\n              let certificateName = values.name;\n              let formDataParmas = {\n                'filePath': res.ossUrl + res.dir + this.addFileInfo.name,\n                'fileName': this.addFileInfo.originName,\n                'name': certificateName,\n                'type': certificateType,\n                'fileType': this.fileType,\n                'uploadMethod': this.uploadMethod,\n                'uploadChannel': 2\n              };\n              console.log(formDataParmas);\n\n              if (that.formId) {\n                that.saveChain(formDataParmas);\n              } else {\n                api.uploadFile({\n                  url: api.add_certificate_file,\n                  //url\n                  filePath: filePath,\n                  // filePath\n                  key: 'file',\n                  //filename\n                  formData: formDataParmas,\n                  // formDate\n                  success: () => {\n                    // success\n                    uni.hideLoading();\n                    uni.showModal({\n                      title: '提交成功',\n                      content: '',\n                      showCancel: false,\n                      success: data => {\n                        if (data.confirm) {\n                          // 此处对普通存证和数据链存证进行区分\n                          this.switchTabBarFun();\n                        }\n                      }\n                    });\n                  },\n                  fail: err => {\n                    uni.hideLoading();\n                    uni.showModal({\n                      title: '提交失败',\n                      content: '',\n                      cancelText: '关闭',\n                      confirmText: '继续提交',\n                      success: res => {\n                        if (res.confirm) {\n                          that.addCertificateSubmit();\n                        } else if (res.cancel) {\n                          this.switchTabBarFun();\n                        }\n                      }\n                    });\n                  }\n                });\n              }\n            },\n            fail: err => {\n              console.log(err);\n            }\n          });\n        },\n        fail: err => {\n          console.log(err);\n          setTimeout(() => {\n            uni.showToast({\n              title: err\n            });\n          }, 50);\n        }\n      });\n    },\n\n    switchTabBarFun() {\n      const app = getApp();\n      app.activeTab = 'data';\n      uni.switchTab({\n        url: '/pages/evidence/index'\n      });\n    },\n\n    // 提交存证是否高亮函数\n    getHighLight: function () {\n      let typeMapName = typeMap[this.type];\n      let value = this[typeMapName];\n\n      if (value && this.nameValue) {\n        this.setData({\n          ishighLight: true\n        });\n      } else {\n        this.setData({\n          ishighLight: false\n        });\n      }\n    },\n\n    /**\n     * @desc 数据链存证保存\n     */\n    saveChain(params) {\n      api.sendPost({\n        url: api.saveChainToContract + '?contractSubjectId=' + this.formId + '&fileName=' + params.name + '&filePath=' + params.filePath + '&uploadMethod=' + params.uploadMethod + '&type=2&uploadChannel=2',\n        success: res => {\n          uni.navigateBack({});\n        },\n\n        fail(err) {\n          setTimeout(() => {\n            uni.showToast({\n              title: err\n            });\n          }, 50);\n        }\n\n      });\n    }\n\n  }\n};\r\n</script>\r\n<style>\r\n@import \"./addCertificate.css\";\r\n</style>","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addCertificate.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addCertificate.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1608796362503\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./tools.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Ficourt%2FDesktop%2Fmycode%2Funi%2Fpages%2FnewEvidence%2FaddCertificate%2FaddCertificate.vue&module=tools&lang=wxs\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./tools.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Ficourt%2FDesktop%2Fmycode%2Funi%2Fpages%2FnewEvidence%2FaddCertificate%2FaddCertificate.vue&module=tools&lang=wxs\"","export default function (Component) {\n       if(!Component.options.wxsCallMethods){\n         Component.options.wxsCallMethods = []\n       }\n       \n     }"],"sourceRoot":""}