{"version":3,"sources":["uni-app:///main.js","webpack:////Users/icourt/Desktop/code/wxApp/newEvidence/certificateDetail/certificateDetail.vue?e7ed","webpack:////Users/icourt/Desktop/code/wxApp/newEvidence/certificateDetail/certificateDetail.vue?c2e4","webpack:////Users/icourt/Desktop/code/wxApp/newEvidence/certificateDetail/certificateDetail.vue?77e9","webpack:////Users/icourt/Desktop/code/wxApp/newEvidence/certificateDetail/certificateDetail.vue?9744","uni-app:///newEvidence/certificateDetail/certificateDetail.vue","webpack:////Users/icourt/Desktop/code/wxApp/newEvidence/certificateDetail/certificateDetail.vue?9855","webpack:////Users/icourt/Desktop/code/wxApp/newEvidence/certificateDetail/certificateDetail.vue?2326","webpack:////Users/icourt/Desktop/code/wxApp/utils/tools.wxs?55c5","webpack:////Users/icourt/Desktop/code/wxApp/utils/tools.wxs?fcfe"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,uI;AACAA,UAAU,CAACC,0BAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoU;AACpU;AACqE;AACL;AACa;;;AAG7E;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,uFAAM;AACR,EAAE,kSAAM;AACR,EAAE,2SAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sSAAU;AACZ;AACA;;AAEA;AACyN;AACzN,WAAW,sOAAM,iBAAiB,8OAAM;;AAExC;AACe,gF;;;;;;;;;;;;AC3Bf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,sNAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAA+0B,CAAgB,+yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgGn2B;AACA;AACA;AACA;AACA;AACA,oB,CAAA;AACA;AACA;AACA,uBADA;AAEA,yBAFA;AAGA,yBAHA;AAIA,yBAJA;AAKA,mBALA,G;;;;AASA;AACA,MADA,kBACA;AACA;AACA,kBADA;AAEA;AACA,YAHA;AAIA;AACA,kBALA;AAMA;AACA,gCAPA;AAQA;AACA,iBATA;AAUA;AACA,mBAXA;AAYA;AACA,sBAbA;AAcA;AACA,mCAfA;AAgBA;AACA,qBAjBA;AAkBA;AACA,gBAnBA;AAoBA,oBApBA;AAqBA,kBArBA;AAsBA,wBAtBA;AAuBA,sBAvBA;AAwBA,6BAxBA;AAyBA,sBAzBA;;AA2BA,GA7BA;;AA+BA;AACA,gCADA,EA/BA;;AAkCA,WAlCA;AAmCA;AACA;AACA;AACA,oBADA;AAEA,wBAFA;;AAIA;;AAEA;AACA;AACA;AACA,GA9CA;;AAgDA,SAhDA,qBAgDA;AACA;AACA,qDADA;;AAGA,GApDA;;AAsDA;AACA,iBADA,yBACA,CADA,EACA;AACA;AACA;AACA;AACA,KALA;;AAOA,gBAPA,wBAOA,CAPA,EAOA;AACA;AACA;AACA;AACA,KAXA;;AAaA;AACA;AACA;AACA;AACA,oBADA;;AAGA;AACA;AACA;AACA,gBAFA;AAGA;AACA;AACA;AACA;AACA,+BADA;AAEA,sBAFA;AAGA,oCAHA;AAIA;;AAEA;AACA;AACA,WAXA,CAWA;;;AAGA,oCAdA,CAcA;;;AAGA;;AAEA;AACA;AACA;AACA,0BADA;;AAGA;AACA,uBADA;AAEA;AACA;AACA,eAJA;AAKA;AACA,kCADA,CACA;AACA,eAPA;;AASA;AACA,SArCA;AAsCA;AACA;AACA;AACA,SAzCA;;AA2CA,KA/DA;;AAiEA,uBAjEA,iCAiEA;AACA;AACA;AACA,wGADA;;AAGA,OAJA,MAIA;AACA;AACA;AACA,KAzEA;;AA2EA;AACA;AACA;AACA;AACA;AACA,mCADA;AAEA;AACA;AACA;AACA,8BADA;AAEA,4BAFA;;AAIA,oBAJA,oBAIA,GAJA,EAIA;AACA;AACA;AACA,+DADA;;AAGA,aATA;;;AAYA,SAhBA;;AAkBA,KAjGA;AAkGA;AACA;AACA;AACA,6CADA;;AAGA;AACA,yCADA;;AAGA,KA1GA;AA2GA;AACA;AACA;AACA;AACA;AACA;AACA,sEADA,CACA;;;AAGA;AACA,8CADA;AAEA,qCAFA;;AAIA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA;AACA,yBADA;AAEA,4BAFA;AAGA,yCAHA;;AAKA,SARA;AASA;AACA;AACA;AACA;AACA,kDADA;AAEA,yCAFA;;AAIA;AACA,SARA;AASA,OA7BA,EA6BA,GA7BA;AA8BA,KA9IA;AA+IA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KA/JA;AAgKA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8BADA;AAEA,wCAFA;;AAIA,OATA,EASA,IATA;AAUA,KA7KA;AA8KA;AACA;AACA,sBADA,CACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBADA;;AAGA,SAJA;AAKA,OARA,MAQA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA;;AAEA;AACA,SAPA;AAQA;AACA,KArMA;AAsMA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BADA;AAEA,wBAFA;;AAIA,SALA,EAKA,EALA;AAMA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBADA;AAEA;;AAEA;AACA,gBADA;AAEA;AACA;AACA,SAJA;AAKA;AACA;AACA;AACA,SARA;;AAUA,KArOA;;AAuOA;AACA,kBAxOA,0BAwOA,GAxOA,EAwOA,MAxOA,EAwOA;AACA;AACA;AACA,gBADA;AAEA;AACA;AACA;AACA;AACA,4BADA;;AAGA;AACA,SATA;AAUA;AACA;AACA;AACA,SAbA;AAcA,2CAdA;;AAgBA,KA1PA;;AA4PA,cA5PA,sBA4PA,QA5PA,EA4PA;AACA;AACA;AACA,0BADA;AAEA,uBAFA;AAGA,sBAHA;AAIA;AACA;AACA,SANA;AAOA;AACA;AACA,SATA;AAUA;AACA;AACA,SAZA;;AAcA,KA5QA;;AA8QA;;;AAGA,mBAjRA,6BAiRA;AACA;AACA,sCADA;AAEA,oBAFA;AAGA,sBAHA;;AAKA;AACA,oCADA;AAEA,sBAFA;AAGA;AACA;AACA,kCADA;;AAGA,SAPA;;AASA,KAhSA;;AAkSA;;;AAGA,oBArSA,4BAqSA,CArSA,EAqSA;AACA;AACA;AACA,2FADA;;AAGA,KA1SA;;AA4SA;;;AAGA,iBA/SA,2BA+SA;AACA;AACA,8BADA;;AAGA,KAnTA;;AAqTA;;;AAGA,mBAxTA,6BAwTA;AACA;AACA,+BADA;;AAGA;AACA,+DADA;;AAGA,KA/TA,EAtDA,E;;;;;;;;;;;;;AChHA;AAAA;AAAA;AAAA;AAA4rC,CAAgB,4mCAAG,EAAC,C;;;;;;;;;;;ACAhtC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA,wCAAwX,CAAgB,qbAAG,EAAC,C;;;;;;;;;;;;ACA5Y;AAAe;AACf;AACA;AACA;;AAEA,M","file":"newEvidence/certificateDetail/certificateDetail.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './newEvidence/certificateDetail/certificateDetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./certificateDetail.vue?vue&type=template&id=26ffe8aa&filter-modules=eyJ0b29scyI6eyJ0eXBlIjoic2NyaXB0IiwiY29udGVudCI6IiIsInN0YXJ0Ijo1MDMwLCJhdHRycyI6eyJtb2R1bGUiOiJ0b29scyIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi91dGlscy90b29scy53eHMifSwiZW5kIjo1MDMwfX0%3D&\"\nvar renderjs\nimport script from \"./certificateDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./certificateDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./certificateDetail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* custom blocks */\nimport block0 from \"../../utils/tools.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Ficourt%2FDesktop%2Fcode%2FwxApp%2FnewEvidence%2FcertificateDetail%2FcertificateDetail.vue&module=tools&lang=wxs\"\nif (typeof block0 === 'function') block0(component)\n\ncomponent.options.__file = \"newEvidence/certificateDetail/certificateDetail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=template&id=26ffe8aa&filter-modules=eyJ0b29scyI6eyJ0eXBlIjoic2NyaXB0IiwiY29udGVudCI6IiIsInN0YXJ0Ijo1MDMwLCJhdHRycyI6eyJtb2R1bGUiOiJ0b29scyIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi91dGlscy90b29scy53eHMifSwiZW5kIjo1MDMwfX0%3D&\"","var components = {\n  halfSlideItem: function() {\n    return import(\n      /* webpackChunkName: \"components/halfSlideItem/halfSlideItem\" */ \"@/components/halfSlideItem/halfSlideItem.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=script&lang=js&\"","<template>\r\n<view>\r\n<view class=\"certificate-detail-box\">\n \n  <view style=\"display:flex; justify-content:space-between\">\n        <view class=\"certificate-title\">存证名称</view>\n        <view style=\"display:flex; justify-content:flex-end;\">\n        <view :class=\"'certificate-detail-preview ' + ((dataList.status === 1 ?  '': 'failed' ))\" @tap=\"showSlideMenu\" v-if=\"type == 'sign'\">更多操作</view>\n         <view :class=\"'certificate-detail-preview ' + ((dataList.status === 1 ?  '': 'failed' ))\" @tap=\"previewCertificate\" v-if=\"type == 'data'\">查看证书</view>\n        </view>\n</view>\n  <view class=\"certificate-detail-items\">\n    <view class=\"certificate-detail-item\">\n      <view class=\"certificate-detail-item-name\">存证名称</view>\n      <view class=\"certificate-detail-item-value\">{{dataList.name || ''}}</view>\n    </view>\n    <view class=\"certificate-detail-item\">\n      <view class=\"certificate-detail-item-name\">存证类型</view>\n      <view class=\"certificate-detail-item-value\">{{dataList.fileType ==1 ? \"文本\" : dataList.fileType==2 ? \"图片\" : dataList.fileType == 3 ? \"语音\" : dataList.fileType == 4 ?\" 视频\": \"签署存证\"}}</view>\n    </view>\n    <view class=\"certificate-detail-item\">\n      <view class=\"certificate-detail-item-name\">存证渠道</view>\n      <view class=\"certificate-detail-item-value\">手机端</view>\n    </view>\n    <view class=\"certificate-detail-item\">\n      <view class=\"certificate-detail-item-name\">存证方式</view>\n      <view class=\"certificate-detail-item-value\">{{dataList.uploadMethod ==1 ? \"上传\":\"拍摄\"}}</view>\n    </view>\n    <view class=\"certificate-detail-item\">\n      <view class=\"certificate-detail-item-name\">存证时间</view>\n      <view class=\"certificate-detail-item-value\">{{tools.formatTime(dataList.gmtCreate,'Y-M-D h:m:s')}}</view>\n    </view>\n    <view class=\"certificate-detail-item\">\n      <view class=\"certificate-detail-item-name\">存证状态</view>\n      <view class=\"certificate-detail-item-value\">{{dataList.status ==0 ? \"出证中...\":dataList.status==1?\"出证成功\":\"出证失败\"}}</view>\n    </view>\n  </view>\n    <view class=\"certificate-title\">文件信息</view>\n    <view class=\"certificate-detail-file\">\n       <view v-if=\"dataList.fileType === 1\" class=\"certificate-detail-file-text\">{{textContext}}</view>\n      <image @tap.stop=\"checkImage\" mode=\"aspectFit\" v-if=\"dataList.fileType === 2\" class=\"certificate-detail-file-content-picture\" :data-src=\"dataList.filePath\" :src=\"dataList.filePath\"></image>\n       <view v-if=\"dataList.fileType === 3\" class=\"add-certificate-voice\">\n          <audio :src=\"dataList.filePath\" :name=\"dataList.name\" author id=\"myAudio\" ontap=\"_handlePlay\" @ended=\"playToEndFun\" controls></audio>\n        </view>\n       <video @tap.stop=\"checkVideo\" v-if=\"dataList.fileType === 4\" id=\"videoBox\" class=\"certificate-detail-file-content-video\" :src=\"dataList.filePath\" @Error=\"videoError\"></video>\n       <view class=\"pdf-file\" v-if=\"dataList.fileType === 5\" ontap=\"_handleViewDetail\">\n        <image src=\"https://shouyiner-prod.oss-cn-beijing.aliyuncs.com/wxapp/shanqian/certificate/file.png\" class=\"file-image\"></image>\n        <text>{{dataList.fileName}}</text>\n      </view>\n    </view>\n    <view style=\"display:flex; justify-content:space-between\">\n        <view class=\"certificate-title\">证书信息</view>\n       \n  </view>\n    <view class=\"certificate-detail-items\">\n    <view class=\"certificate-detail-item\">\n      <view class=\"certificate-detail-item-name\">存证hash</view>\n    </view>\n    <view class=\"certificate-detail-item\">\n      <view class=\"certificate-detail-item-value\">{{dataList.hash || ''}}</view>\n    </view>\n    </view>\n    <view style=\"height:20rpx; width=100%; background:#F7F8F9\"></view>\n    <view class=\"certificate-detail-items\">\n    <view class=\"certificate-detail-item\">\n      <view class=\"certificate-detail-item-name\">认证时间</view>\n      <view class=\"certificate-detail-item-value\">{{tools.formatTime(dataList.gmtModified,'Y-M-D h:m:s')}}</view>\n    </view>\n    <view class=\"certificate-detail-item\">\n      <view class=\"certificate-detail-item-name\">证书状态</view>\n      <view class=\"certificate-detail-item-value\">{{dataList.status ==0 ? \"出证中...\":dataList.status==1?\"出证成功\":\"出证失败\"}}</view>\n    </view>\n    </view>\n    <!-- 关联合同 -->\n     <view class=\"certificate-title\" v-if=\"type=='data' && contractList.length > 0\">关联合同</view>\n     <view class=\"certificate-detail-items\" v-if=\"type=='data'\">\n     <view v-for=\"(item, index) in contractList\" :key=\"index\" class=\"certificate-detail-item\">\n      <view class=\"certificate-detail-item-name undeContranct\" :data-contractid=\"item.id\" @tap=\"goContractDetail\">{{ item.contractTitle }}</view>\n    </view>\n    </view>\n     </view>\n\n<!-- 证据链菜单 -->\n<halfSlideItem :isShow=\"evidenceMenuShow\">\n\t<view class=\"slide-menu_list\">\n\t\t<view class=\"slide-menu_item\" @tap=\"previewCertificate\">查看证书</view>\n\t\t<view class=\"slide-menu_item\" @tap=\"goChainListPage\">查看证据链</view>\n\t</view>\n</halfSlideItem>\n  <!-- <view class='empty-data placeholder-color' wx:if=\"{{dataList.length <= 0}}\">暂无数据</view> -->\r\n</view>\r\n</template>\r\n\r\n<script module=\"tools\" lang=\"wxs\" src=\"../../utils/tools.wxs\"></script>\r\n\r\n<script>\r\nlet api = require(\"../../api/request.js\");\r\nlet utils = require(\"../../utils/utils.js\");\r\nlet app = getApp();\r\nlet timer = null;\r\nlet innerAudioContext = uni.createInnerAudioContext();\r\nlet videoBox = null; // 存证类型icon的MAP\r\n// 存证类型icon的MAP\nlet iconMap = {\n  1: 'one-filetype-doc',\n  2: 'one-filetype-image',\n  3: 'one-filetype-music',\n  4: 'one-filetype-video',\n  5: 'one-contract'\n};\r\nimport halfSlideItem from \"../../components/halfSlideItem/halfSlideItem\";\r\n\r\nexport default {\n  data() {\n    return {\n      imageSrc: '',\n      // 图像src\n      id: '',\n      // 存证id，路由获取\n      dataList: {},\n      // 存证详情数据\n      icon: 'one-filetype-image',\n      // 存证类型icon\n      duration: 0,\n      //声音类型音频时长\n      isPlay: false,\n      // 声音是否播放\n      videoPlayTime: 0,\n      // 音频播放时间time\n      showVideoPlayTime: '00:00:00',\n      //音频播放显示时间\n      textContext: '',\n      // 文本内容\n      pdfUrl: '',\n      contractId: \"\",\n      type: 'sign',\n      audioContext: null,\n      contractList: [],\n      evidenceMenuShow: false,\n      durationShow: \"\"\n    };\n  },\n\n  components: {\n    halfSlideItem\n  },\n  props: {},\n  // 页面load加载数据\n  onLoad: function (options) {\n    this.setData({\n      id: options.id,\n      type: options.type\n    });\n    this.fetchRecords();\n\n    if (options.type == 'data') {\n      this.getContractList();\n    }\n  },\n\n  onReady() {\n    this.setData({\n      audioContext: uni.createAudioContext('myAudio')\n    });\n  },\n\n  methods: {\n    handlePlayFun(e) {\n      console.log(this.audioContext, this.audioContext._getAppStatus());\n      this.audioContext.play();\n      console.log(this.audioContext._getAppStatus());\n    },\n\n    playToEndFun(e) {\n      this.audioContext.pause();\n      this.audioContext.seek(0);\n      this.audioContext.pause();\n    },\n\n    // 获取存证详情\n    fetchRecords: function () {\n      var that = this;\n      uni.showLoading({\n        title: '加载中'\n      });\n      var url = api.evidence_detail + '?id=' + this.id;\n      api.sendGet({\n        // get请求\n        url: url,\n        success: res => {\n          uni.hideLoading();\n          let icon = iconMap[res.fileType];\n          that.setData({\n            dataList: res || {},\n            icon: icon,\n            contractId: res.filePath\n          }); // 存证类型为文件时（1为txt）\n\n          if (res.fileType === 1) {\n            that.openTxt();\n          } // 存证类型为图像 \n\n\n          if (res.fileType === 2) {} // 存证类型为音频（fileType为3）\n\n\n          if (res.fileType === 3) {}\n\n          if (res.fileType === 5) {\n            const url = api.get_certificate_address + \"/\" + this.dataList.id;\n            uni.showLoading({\n              title: '加载中'\n            });\n            api.sendGet({\n              url: url,\n              success: res => {\n                this.downloadPdfFun(res, 0);\n              },\n              fail: function (err) {\n                uni.hideLoading(); // utils.showError(err)\n              }\n            });\n          }\n        },\n        fail: err => {\n          uni.hideLoading();\n          utils.showError(err);\n        }\n      });\n    },\n\n    handleViewDetailFun() {\n      if (this.type == 'sign') {\n        uni.navigateTo({\n          url: `/pages/home/sign/next/contractDetail/contractDetail?contractId=${this.contractId}`\n        });\n      } else {\n        this.previewCertificate();\n      }\n    },\n\n    // 打开txt文本函数 先downloadFile下载，再fs.readFile读取\n    openTxt: function () {\n      let that = this;\n      let fs = uni.getFileSystemManager();\n      uni.downloadFile({\n        url: this.dataList.filePath,\n        success: function (res) {\n          const filePath = res.tempFilePath;\n          fs.readFile({\n            filePath: filePath,\n            encoding: 'utf8',\n\n            complete(res) {\n              console.log(res.data);\n              that.setData({\n                textContext: JSON.parse(res.data).context || ''\n              });\n            }\n\n          });\n        }\n      });\n    },\n    // \n    checkImage: function (e) {\n      this.setData({\n        imageSrc: e.currentTarget.dataset.url\n      });\n      uni.navigateTo({\n        url: '?imageSrc=' + this.imageSrc\n      });\n    },\n    // 打开音频函数 试用innerAudioContext的api\n    setVoice: function () {\n      var that = this;\n      var url = this.dataList.filePath;\n      innerAudioContext.src = url || '';\n      setTimeout(function () {\n        var _durationShow = that.showTime(innerAudioContext.duration); // 播放时间显示\n\n\n        that.setData({\n          duration: innerAudioContext.duration,\n          durationShow: _durationShow\n        });\n        innerAudioContext.onError(res => {\n          console.log(res.errMsg);\n        });\n        innerAudioContext.onEnded(res => {\n          innerAudioContext.stop();\n          clearInterval(timer);\n          that.setData({\n            isPlay: false,\n            videoPlayTime: 0,\n            showVideoPlayTime: '00:00:00'\n          });\n        });\n        innerAudioContext.onTimeUpdate(res => {\n          if (innerAudioContext.duration && !that.duration) {\n            _durationShow = that.showTime(innerAudioContext.duration);\n            that.setData({\n              duration: innerAudioContext.duration,\n              durationShow: _durationShow\n            });\n          }\n        });\n      }, 200);\n    },\n    // 音频显示函数\n    showTime: function (time) {\n      function formatShow(value) {\n        return value < 10 ? '0' + value : value;\n      }\n\n      var sec = parseInt(time % 60);\n\n      var _min = parseInt(time / 60);\n\n      var min = parseInt(_min % 24);\n      var hour = parseInt(_min / 24);\n      hour = formatShow(hour);\n      min = formatShow(min);\n      sec = formatShow(sec);\n      return hour + ':' + min + ':' + sec;\n    },\n    // 设置定时函数 显示播放时间\n    setTime: function () {\n      var that = this;\n      timer = setInterval(function () {\n        let _time = that.videoPlayTime + 1;\n\n        var _formatTime = that.showTime(_time);\n\n        that.setData({\n          videoPlayTime: _time,\n          showVideoPlayTime: _formatTime\n        });\n      }, 1000);\n    },\n    //播放声音函数\n    playVoice: function () {\n      var that = this; // if (!this.data.duration) return\n\n      if (this.isPlay) {\n        innerAudioContext.pause();\n        clearInterval(timer);\n        innerAudioContext.onPause(() => {\n          that.setData({\n            isPlay: false\n          });\n        });\n      } else {\n        innerAudioContext.play();\n        innerAudioContext.onPlay(() => {\n          clearInterval(timer);\n          that.setData({\n            isPlay: true\n          }); // 设置定时函数同步显示时间\n\n          this.setTime();\n        });\n      }\n    },\n    // 预览下载\n    previewCertificate: function (e) {\n      var that = this;\n\n      if (this.dataList.status !== 1) {\n        setTimeout(() => {\n          uni.showToast({\n            title: '出证中，请稍后再试',\n            icon: 'none'\n          });\n        }, 50);\n        return;\n      }\n\n      var hash = this.dataList.hash;\n      if (!hash) return;\n      var url = api.get_certificate_address + \"/\" + this.dataList.id;\n      uni.showLoading({\n        title: '加载中'\n      }); // 下载成功 打开pdf\n\n      api.sendGet({\n        url: url,\n        success: function (res) {\n          that.downloadPdfFun(res, 1);\n        },\n        fail: function (err) {\n          uni.hideLoading();\n          utils.showError(err);\n        }\n      });\n    },\n\n    // 打开pdf文件\n    downloadPdfFun(url, status) {\n      console.log(url);\n      uni.downloadFile({\n        url: url,\n        success: res => {\n          uni.hideLoading();\n          const filePath = res.tempFilePath;\n          this.setData({\n            pdfUrl: filePath\n          });\n          if (status) this.openPdfFun(filePath);\n        },\n        fail: function (res) {\n          uni.hideLoading();\n          console.log(res);\n        },\n        complete: function (res) {}\n      });\n    },\n\n    openPdfFun(filePath) {\n      console.log(filePath);\n      uni.openDocument({\n        filePath: filePath,\n        fileType: 'pdf',\n        showMenu: true,\n        success: res => {\n          console.log(res, 'success');\n        },\n        fail: err => {\n          console.log(err, 'fail');\n        },\n        complete: () => {\n          console.log('complete');\n        }\n      });\n    },\n\n    /**\n     * @desc 获取关联合同\n     */\n    getContractList() {\n      const params = {\n        certificateEvidenceId: this.id,\n        pageIndex: 0,\n        pageSize: 1000\n      };\n      api.sendGet({\n        url: api.findContractSubject,\n        params: params,\n        success: res => {\n          this.setData({\n            contractList: res.data\n          });\n        }\n      });\n    },\n\n    /**\n     * @desc 跳转合同详情\n     */\n    goContractDetail(e) {\n      const contractId = e.currentTarget.dataset.contractid;\n      uni.navigateTo({\n        url: \"/pages/home/sign/next/contractDetail/contractDetail?contractId=\" + contractId\n      });\n    },\n\n    /**\n     * @desc 更多操作\n     */\n    showSlideMenu() {\n      this.setData({\n        evidenceMenuShow: true\n      });\n    },\n\n    /**\n     * @desc 查看证据链\n     */\n    goChainListPage() {\n      this.setData({\n        evidenceMenuShow: false\n      });\n      uni.navigateTo({\n        url: \"/pages/home/contract/chains/chains?id=\" + this.id\n      });\n    }\n\n  }\n};\r\n</script>\r\n<style>\r\n@import \"./certificateDetail.css\";\r\n</style>","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./certificateDetail.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1608793122285\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./tools.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Ficourt%2FDesktop%2Fcode%2FwxApp%2FnewEvidence%2FcertificateDetail%2FcertificateDetail.vue&module=tools&lang=wxs\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./tools.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Ficourt%2FDesktop%2Fcode%2FwxApp%2FnewEvidence%2FcertificateDetail%2FcertificateDetail.vue&module=tools&lang=wxs\"","export default function (Component) {\n       if(!Component.options.wxsCallMethods){\n         Component.options.wxsCallMethods = []\n       }\n       \n     }"],"sourceRoot":""}